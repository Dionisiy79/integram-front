<style>
th {
	font-weight: normal;
	position: relative;
}
.ms-link  {
	color: #333;
}
td.fixed-td div,td.fixed-tr div{
	max-height: 1rem;
}
.modal-form {
    z-index: 199;
}
.fixed-td {
	max-width: 180px;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
	padding: 2px 1px 0 1px !important;
}
.fixed-tr {
	max-width: 30vw;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
	padding: 2px 1px 0 1px !important;
}
.edit {
	border: 1px solid lightgray;
	border-radius: 5px;
	width: max-content;
	max-width: 266px;
	padding: 15px;
	list-style-type: none;
	margin-bottom: 0;
}
.edit-table {
	position: fixed;
	background-color: #fff;
}
.edit-сolumn {
	position: fixed;
	background-color: #fff;
}
.edit li:hover {
	box-shadow: 5px 5px 20px 5px rgba(169, 176, 181, 0.2);
	border-radius: 5px;
}
.edit a {
	color: #777777;
	font-size: 12px;
	text-decoration: none;
}
.edit li {
	padding: 4px;
	margin-bottom: 10px;
}
.th-plus {
	cursor: pointer;
	font-size: 24px;
	font-weight: 600;
	text-align: center;
}
.input-add {
	display: flex;
	flex-direction: column;
}
.table thead th {
	border: 1px solid #dee2e6;
	vertical-align: middle;
	text-align: center;
	padding-top: 0;
	padding-bottom: 0;
}
.table td {
	border: 1px solid #dee2e6;
}
/*
.table td:last-child {
	border: none;
}
*/
.edit-btn {
	position: absolute;
	right: 3px;
	top: 0;
	display: inline-flex;
}
.edit-btn-column:hover,.edit-btn-table:hover{
	cursor: pointer;
	background-color: #e7e7e7;
	border-radius:6px;
}
.add-select {
   font-size: 18px;
}
.adding-new-req-form {
	display: flex;
	flex-direction: column;
	font-size: 18px;
}
.new-col{
	position:absolute;
	right:0;
	z-index: 10;
	border: 1px solid lightgray;
	border-radius: 5px;
	background-color: white;
	width: max-content;
	padding: 15px;
}
.i-edit{
	display: none;
	position:absolute;
	right:0;
}
.breadcrumb {
	padding: 2px;
	margin: 0;
}
.data-row:hover{
	background-color: #fafafa;
}
.col-header {
	padding-top: 8px;
	padding-bottom: 8px;
}
.nodeco:hover {
	text-decoration: none;
	font-weight: 500;
}
.controls-left a:hover {
	background-color:#f7f7f7;
	border-radius:5px;
	text-decoration: none;
}
.turned-on{
    background-color: #f5f5f5;
    border-radius: 5px;
}
#typesBox {
	border: 1px solid lightgray;
	border-radius: 5px;
	width: max-content;
	max-width: 266px;
	padding: 10px;
	list-style-type: none;
	margin-bottom: 0px;
	position: absolute;
	background-color: white;
	display: none;
}
#default_limit {
	width: 50px;
	text-align: end;
	-moz-appearance: textfield;
}
#default_limit::-webkit-outer-spin-button,
#default_limit::-webkit-inner-spin-button {
	-webkit-appearance: none;
	margin: 0;
}
#warn{
    position: absolute;
    width: 100%;
    z-index: 100;
}
</style>
<style>
.inline-edit{
    border: 0 !important;
    outline: 1px solid #dee2e6;
    width: 100%;
}
.saving{
    background-color: #fff5f5;
}
.editing{
    padding: 0 !important;
}
.select2{
    min-width: 100px;
}
.editing-modal{
    background-color: #fff5f5;
}
.drop-svg{
    shape-rendering: geometricprecision;
    margin-top: -5px;
}
.button-on{
    background-color: #f5f5f5;
    border-radius: 5px;
}
</style>
<nav aria-label="breadcrumb">
  <ol class="breadcrumb pl-2">
	<li class="breadcrumb-item"><a href="/{_global_.z}">{_global_.z}</a></li>
	<li class="breadcrumb-item"><a href="/{_global_.z}/dict/"><t9n>[RU]Таблицы[EN]Tables</t9n></a></li>
	<li class="breadcrumb-item parent-table" style="display:none"><a href="/{_global_.z}/object/"></a></li>
	<li class="breadcrumb-item parent-object" style="display:none"><a href="/{_global_.z}/edit_obj/"></a></li>
	<li class="breadcrumb-item active" aria-current="page">{_parent_.title}</li>
  </ol>
</nav>
<link href="/css/select2.min.css" rel="stylesheet" />
<script src="/js/select2.min.js"></script>
<script src="/js/freeze-table.js"></script>
<script>
function showEdit(){
	$(event.target).closest('tr').find('.i-edit').show();
}
function hideEdit(){
	$('.i-edit').hide();
}
function tbSize(v){
	document.cookie = 'tb_size='+v+'; path=/{_global_.z}; max-age=31622400';
	$('#tb').css('font-size',v+'px');
}
function wrapHead(){
    if(getCookie('wrap_head')==='1')
    	document.cookie='wrap_head=1; path=/{_global_.z}/object/{_global_.id}; max-age=0';
	else
	    document.cookie='wrap_head=1; path=/{_global_.z}/object/{_global_.id}; max-age=31622400';
    document.location.reload();
}
function tipsOff(v){
	document.cookie = 'tips_off='+v+'; path=/{_global_.z}; max-age=31622400';
	$('.tips-text,.settings').toggle();
}
function getAlign(b){
    switch (b){
        case '13': // NUMBER
        case '14': // SIGNED
            return 'RIGHT';
        case '11': // BOOLEAN
        case '20': // PWD
            return 'CENTER';
    }
    return 'LEFT';
}
$('.breadcrumb-item a')[0].innerHTML=db.substr(0,1).toUpperCase()+db.substr(1);
if(getCookie('tips_off')==='1')
	$("<style>.tips-text{ display:none; }</style>").appendTo("head");
</script>
<div class="alert alert-warning hidden" id="warn" role="alert" onclick="$(this).addClass('hidden')"></div>
<!-- Begin:&Uni_obj -->
<div id="controls" style="z-index: 99; position: relative;" class="controls t9n">
	<div class="controls-left">
		<a btn="plus.png" class="create-btn display-{CREATE_GRANTED}" onclick="addRec()" title="<t9n>[RU]Добавить запись в таблицу[EN]Create a record in the table</t9n>">
			<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M8 2C8.13261 2 8.25979 2.05268 8.35355 2.14645C8.44732 2.24021 8.5 2.36739 8.5 2.5V7.5H13.5C13.6326 7.5 13.7598 7.55268 13.8536 7.64645C13.9473 7.74021 14 7.86739 14 8C14 8.13261 13.9473 8.25979 13.8536 8.35355C13.7598 8.44732 13.6326 8.5 13.5 8.5H8.5V13.5C8.5 13.6326 8.44732 13.7598 8.35355 13.8536C8.25979 13.9473 8.13261 14 8 14C7.86739 14 7.74021 13.9473 7.64645 13.8536C7.55268 13.7598 7.5 13.6326 7.5 13.5V8.5H2.5C2.36739 8.5 2.24021 8.44732 2.14645 8.35355C2.05268 8.25979 2 8.13261 2 8C2 7.86739 2.05268 7.74021 2.14645 7.64645C2.24021 7.55268 2.36739 7.5 2.5 7.5H7.5V2.5C7.5 2.36739 7.55268 2.24021 7.64645 2.14645C7.74021 2.05268 7.86739 2 8 2Z" fill="#212529"></path>
</svg> <small class="tips-text"><font color="#1A1A1A"><t9n>[RU]Добавить[EN]Create</t9n></font></small>
		</a>
		<a btn="filter.png" onclick="if($('#filter_row').hasClass('hidden'))$('.filter-row,#clearSearch').removeClass('hidden');else sendForm()" title="<t9n>[RU]Показать / применить фильтры[EN]Show / apply filters</t9n>">
			<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M16.4286 16.4286L13.3214 13.3214M15 9.2857C15 12.4416 12.4416 15 9.2857 15C6.12978 15 3.57141 12.4416 3.57141 9.2857C3.57141 6.12978 6.12978 3.57141 9.2857 3.57141C12.4416 3.57141 15 6.12978 15 9.2857Z" stroke="#1A1A1A" stroke-linecap="round" stroke-linejoin="round"></path>
</svg><small class="tips-text"><font color="#1A1A1A"><t9n>[RU]Искать[EN]Search</t9n></font></small>
		</a>
		<a btn="clear-filters.png" href="/{_global_.z}/object/{ID}/?F_U={F_U}" id="clearSearch" class="hidden" title="<t9n>[RU]Очистить фильтр и сортировку[EN]Clear the filter and sort</t9n>">
			<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M16.4286 16.4286L13.3214 13.3214M15 9.2857C15 12.4416 12.4416 15 9.2857 15C6.12978 15 3.57141 12.4416 3.57141 9.2857C3.57141 6.12978 6.12978 3.57141 9.2857 3.57141C12.4416 3.57141 15 6.12978 15 9.2857Z" stroke="#1A1A1A" stroke-linecap="round" stroke-linejoin="round"></path>
<path d="M7 7L12 12M12 7L7 12" stroke="#1A1A1A" stroke-linecap="round" stroke-linejoin="round"></path>
</svg><small class="tips-text"><font color="#1A1A1A"><t9n>[RU]Очистить[EN]Clear</t9n></font></small>
		</a>
		<a btn="refresh.png" onclick="sendForm()" title="<t9n>[RU]Обновить отображение таблицы (что в ней изменили другие пользователи)[EN]Refresh the table view (see the updates from other users)</t9n>">
			<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12.9757 7.87664H17.3992C17.4527 7.87666 17.505 7.89191 17.5501 7.9206C17.5952 7.94928 17.6312 7.99022 17.6538 8.03862C17.6765 8.08702 17.6849 8.14087 17.6781 8.19387C17.6712 8.24687 17.6494 8.29683 17.6152 8.33789L15.4035 10.9929C15.3771 11.0245 15.3441 11.05 15.3067 11.0675C15.2694 11.085 15.2287 11.094 15.1875 11.094C15.1463 11.094 15.1056 11.085 15.0682 11.0675C15.0309 11.05 14.9979 11.0245 14.9715 10.9929L12.7597 8.33789C12.7255 8.29683 12.7037 8.24687 12.6969 8.19387C12.6901 8.14087 12.6985 8.08702 12.7211 8.03862C12.7438 7.99022 12.7798 7.94928 12.8249 7.9206C12.87 7.89191 12.9223 7.87666 12.9757 7.87664V7.87664ZM0.600725 10.1266H5.02423C5.07767 10.1266 5.13 10.1114 5.17509 10.0827C5.22018 10.054 5.25616 10.0131 5.27882 9.96467C5.30149 9.91627 5.3099 9.86242 5.30306 9.80942C5.29622 9.75642 5.27443 9.70646 5.24023 9.66539L3.02847 7.01039C3.00208 6.97874 2.96905 6.95328 2.93172 6.9358C2.8944 6.91833 2.85369 6.90927 2.81247 6.90927C2.77126 6.90927 2.73055 6.91833 2.69323 6.9358C2.6559 6.95328 2.62287 6.97874 2.59647 7.01039L0.384725 9.66539C0.350522 9.70646 0.328727 9.75642 0.321891 9.80942C0.315055 9.86242 0.323461 9.91627 0.346125 9.96467C0.368789 10.0131 0.404773 10.054 0.449864 10.0827C0.494954 10.1114 0.547283 10.1266 0.600725 10.1266V10.1266Z" fill="#212529"></path>
<path fill-rule="evenodd" clip-rule="evenodd" d="M9.00001 3.37664C7.25401 3.37664 5.69251 4.17201 4.66088 5.42188C4.61482 5.48159 4.55722 5.53143 4.49151 5.56843C4.42579 5.60543 4.35331 5.62883 4.27837 5.63726C4.20343 5.64569 4.12756 5.63896 4.05528 5.61747C3.98299 5.59599 3.91576 5.56019 3.85759 5.5122C3.79941 5.46421 3.75148 5.40502 3.71664 5.33813C3.68181 5.27125 3.66077 5.19805 3.6548 5.12287C3.64882 5.0477 3.65802 4.97209 3.68185 4.90054C3.70568 4.82899 3.74365 4.76296 3.79351 4.70638C4.61722 3.7091 5.71005 2.9694 6.94201 2.57525C8.17396 2.1811 9.49321 2.14909 10.7428 2.48304C11.9925 2.81698 13.1199 3.50282 13.991 4.45898C14.8621 5.41515 15.4402 6.60139 15.6566 7.87663H14.5125C14.2528 6.60629 13.5623 5.46463 12.5579 4.64467C11.5534 3.82472 10.2966 3.37679 9.00001 3.37664V3.37664ZM3.48751 10.1266C3.70048 11.1668 4.2034 12.1256 4.93817 12.892C5.67294 13.6585 6.60956 14.2015 7.63984 14.4582C8.67012 14.7149 9.75201 14.6749 10.7605 14.3428C11.769 14.0107 12.663 13.4 13.3391 12.5814C13.3852 12.5217 13.4428 12.4718 13.5085 12.4348C13.5742 12.3978 13.6467 12.3744 13.7216 12.366C13.7966 12.3576 13.8725 12.3643 13.9447 12.3858C14.017 12.4073 14.0843 12.4431 14.1424 12.4911C14.2006 12.5391 14.2485 12.5983 14.2834 12.6651C14.3182 12.732 14.3392 12.8052 14.3452 12.8804C14.3512 12.9556 14.342 13.0312 14.3182 13.1027C14.2943 13.1743 14.2564 13.2403 14.2065 13.2969C13.3828 14.2942 12.29 15.0339 11.058 15.428C9.82605 15.8222 8.50681 15.8542 7.25719 15.5202C6.00756 15.1863 4.88015 14.5004 4.00905 13.5443C3.13794 12.5881 2.5598 11.4019 2.34338 10.1266H3.48751Z" fill="#212529"></path>
</svg> <small class="tips-text"><font color="#1A1A1A"><t9n>[RU]Обновить[EN]Refresh</t9n></font></small>
		</a>
		<a btn="flow-chart.png" title="<t9n>[RU]Показать связи&nbsp;&mdash; откуда могут быть ссылки на записи этой таблицы[EN]Show the links to records of this table</t9n>" onclick="byId('lnx').value=byId('lnx').value^1;sendForm()">
			<svg width="20" height="20" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M5.30438 7.36149L3.76088 8.905C3.12789 9.53798 2.77228 10.3965 2.77228 11.2917C2.77228 12.1869 3.12789 13.0454 3.76088 13.6784C4.39386 14.3114 5.25238 14.667 6.14756 14.667C7.04275 14.667 7.90126 14.3114 8.53425 13.6784L10.5908 11.6207C10.9725 11.239 11.257 10.7712 11.4205 10.2567C11.5841 9.74224 11.6218 9.19603 11.5305 8.66395C11.4393 8.13186 11.2217 7.62943 10.8961 7.19882C10.5705 6.76822 10.1463 6.42201 9.65925 6.18924L9 6.8485C8.93307 6.91554 8.87486 6.99076 8.82675 7.07237C9.20309 7.18056 9.54469 7.3851 9.81776 7.66576C10.0908 7.94642 10.2859 8.29349 10.3838 8.67266C10.4816 9.05183 10.4788 9.44996 10.3756 9.82771C10.2724 10.2055 10.0724 10.5497 9.79538 10.8265L7.74 12.883C7.31781 13.3052 6.7452 13.5424 6.14813 13.5424C5.55106 13.5424 4.97844 13.3052 4.55625 12.883C4.13406 12.4608 3.89687 11.8882 3.89687 11.2911C3.89687 10.6941 4.13406 10.1214 4.55625 9.69924L5.44838 8.80824C5.32251 8.33656 5.27388 7.84873 5.30438 7.36149Z" fill="#212529"></path>
<path d="M7.40925 5.25774C7.02754 5.63951 6.74299 6.10726 6.57946 6.62175C6.41594 7.13625 6.37822 7.68246 6.46947 8.21454C6.56072 8.74663 6.77828 9.24906 7.10389 9.67966C7.4295 10.1103 7.85365 10.4565 8.34075 10.6892L9.21263 9.81624C8.83119 9.71393 8.48341 9.51303 8.20422 9.23372C7.92502 8.95442 7.72427 8.60655 7.62211 8.22507C7.51996 7.84359 7.52001 7.44195 7.62226 7.0605C7.72451 6.67905 7.92536 6.33123 8.20463 6.05199L10.26 3.99549C10.6822 3.5733 11.2548 3.33612 11.8519 3.33612C12.4489 3.33612 13.0216 3.5733 13.4438 3.99549C13.8659 4.41769 14.1031 4.9903 14.1031 5.58737C14.1031 6.18444 13.8659 6.75705 13.4438 7.17924L12.5516 8.07024C12.6776 8.54274 12.726 9.03212 12.6956 9.51812L14.2391 7.97462C14.8721 7.34163 15.2277 6.48311 15.2277 5.58793C15.2277 4.69275 14.8721 3.83423 14.2391 3.20124C13.6061 2.56826 12.7476 2.21265 11.8524 2.21265C10.9573 2.21265 10.0987 2.56826 9.46575 3.20124L7.40925 5.25774Z" fill="#212529"></path>
</svg> <small class="tips-text"><font color="#1A1A1A"><t9n>[RU]Связи[EN]References</t9n></font></small>
		</a>
		<a btn="resize.png" onclick="tbCompact('1')" id="resize" title="<t9n>[RU]Просторный режим ячеек[EN]Broad cell mode</t9n>" style="display:none">
			<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_9_200289)">
<path fill-rule="evenodd" clip-rule="evenodd" d="M5.828 10.172C5.73424 10.0783 5.60708 10.0256 5.4745 10.0256C5.34192 10.0256 5.21477 10.0783 5.121 10.172L1.025 14.268V11.5C1.025 11.3674 0.972323 11.2402 0.878555 11.1464C0.784787 11.0527 0.65761 11 0.525001 11C0.392393 11 0.265216 11.0527 0.171448 11.1464C0.0776799 11.2402 0.0250015 11.3674 0.0250015 11.5V15.475C0.0250015 15.6076 0.0776799 15.7348 0.171448 15.8285C0.265216 15.9223 0.392393 15.975 0.525001 15.975H4.5C4.63261 15.975 4.75979 15.9223 4.85355 15.8285C4.94732 15.7348 5 15.6076 5 15.475C5 15.3424 4.94732 15.2152 4.85355 15.1214C4.75979 15.0277 4.63261 14.975 4.5 14.975H1.732L5.828 10.879C5.92174 10.7852 5.97439 10.6581 5.97439 10.5255C5.97439 10.3929 5.92174 10.2658 5.828 10.172ZM10.172 5.82799C10.2658 5.92173 10.3929 5.97439 10.5255 5.97439C10.6581 5.97439 10.7852 5.92173 10.879 5.82799L14.975 1.73199V4.49999C14.975 4.6326 15.0277 4.75978 15.1214 4.85355C15.2152 4.94732 15.3424 4.99999 15.475 4.99999C15.6076 4.99999 15.7348 4.94732 15.8286 4.85355C15.9223 4.75978 15.975 4.6326 15.975 4.49999V0.524994C15.975 0.392386 15.9223 0.265209 15.8286 0.17144C15.7348 0.0776723 15.6076 0.0249939 15.475 0.0249939H11.5C11.3674 0.0249939 11.2402 0.0776723 11.1464 0.17144C11.0527 0.265209 11 0.392386 11 0.524994C11 0.657602 11.0527 0.784779 11.1464 0.878547C11.2402 0.972315 11.3674 1.02499 11.5 1.02499H14.268L10.172 5.12099C10.0783 5.21476 10.0256 5.34191 10.0256 5.47449C10.0256 5.60708 10.0783 5.73423 10.172 5.82799Z" fill="#212529"></path>
</g>
<defs>
<clipPath id="clip0_9_200289">
<rect width="16" height="16" fill="white"></rect>
</clipPath>
</defs>
</svg> <small class="tips-text"><font color="#1A1A1A"><t9n>[RU]Просторно[EN]Broaden</t9n></font></small>
		</a>
		<a btn="collapse.png" onclick="tbCompact('2')" id="collapse" title="<t9n>[RU]Компактный режим ячеек[EN]Compact cell mode</t9n>">
			<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_9_200291)">
<path fill-rule="evenodd" clip-rule="evenodd" d="M0.171997 15.828C0.265761 15.9217 0.392915 15.9744 0.525497 15.9744C0.65808 15.9744 0.785234 15.9217 0.878998 15.828L4.975 11.732V14.5C4.975 14.6326 5.02768 14.7598 5.12144 14.8536C5.21521 14.9473 5.34239 15 5.475 15C5.60761 15 5.73478 14.9473 5.82855 14.8536C5.92232 14.7598 5.975 14.6326 5.975 14.5V10.525C5.975 10.3924 5.92232 10.2652 5.82855 10.1714C5.73478 10.0777 5.60761 10.025 5.475 10.025H1.5C1.36739 10.025 1.24021 10.0777 1.14644 10.1714C1.05268 10.2652 0.999997 10.3924 0.999997 10.525C0.999997 10.6576 1.05268 10.7848 1.14644 10.8786C1.24021 10.9723 1.36739 11.025 1.5 11.025H4.268L0.171997 15.121C0.078262 15.2148 0.0256042 15.3419 0.0256042 15.4745C0.0256042 15.6071 0.078262 15.7342 0.171997 15.828ZM15.828 0.171997C15.7342 0.078262 15.6071 0.0256042 15.4745 0.0256042C15.3419 0.0256042 15.2148 0.078262 15.121 0.171997L11.025 4.268V1.5C11.025 1.36739 10.9723 1.24021 10.8786 1.14644C10.7848 1.05268 10.6576 0.999997 10.525 0.999997C10.3924 0.999997 10.2652 1.05268 10.1714 1.14644C10.0777 1.24021 10.025 1.36739 10.025 1.5V5.475C10.025 5.60761 10.0777 5.73478 10.1714 5.82855C10.2652 5.92232 10.3924 5.975 10.525 5.975H14.5C14.6326 5.975 14.7598 5.92232 14.8536 5.82855C14.9473 5.73478 15 5.60761 15 5.475C15 5.34239 14.9473 5.21521 14.8536 5.12144C14.7598 5.02768 14.6326 4.975 14.5 4.975H11.732L15.828 0.878998C15.9217 0.785234 15.9744 0.65808 15.9744 0.525497C15.9744 0.392915 15.9217 0.265761 15.828 0.171997Z" fill="#212529"></path>
</g>
<defs>
<clipPath id="clip0_9_200291">
<rect width="16" height="16" fill="white"></rect>
</clipPath>
</defs>
</svg> <small class="tips-text"><font color="#1A1A1A"><t9n>[RU]Компактно[EN]Shrink cells</t9n></font></small>
		</a>
		<a btn="fixed.png" onclick="tbCompact('3')" id="fixed" title="<t9n>[RU]Фиксированная высота ячеек[EN]Fixed cell heigth</t9n>" style="display:none">
			<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M1 8C1 7.86739 1.05268 7.74021 1.14645 7.64645C1.24021 7.55268 1.36739 7.5 1.5 7.5H14.5C14.6326 7.5 14.7598 7.55268 14.8536 7.64645C14.9473 7.74021 15 7.86739 15 8C15 8.13261 14.9473 8.25979 14.8536 8.35355C14.7598 8.44732 14.6326 8.5 14.5 8.5H1.5C1.36739 8.5 1.24021 8.44732 1.14645 8.35355C1.05268 8.25979 1 8.13261 1 8ZM8 0C8.13261 0 8.25979 0.0526784 8.35355 0.146447C8.44732 0.240215 8.5 0.367392 8.5 0.5V4.293L9.646 3.146C9.73989 3.05211 9.86722 2.99937 10 2.99937C10.1328 2.99937 10.2601 3.05211 10.354 3.146C10.4479 3.23989 10.5006 3.36722 10.5006 3.5C10.5006 3.63278 10.4479 3.76011 10.354 3.854L8.354 5.854C8.30755 5.90056 8.25238 5.93751 8.19163 5.96271C8.13089 5.98792 8.06577 6.00089 8 6.00089C7.93423 6.00089 7.86911 5.98792 7.80837 5.96271C7.74762 5.93751 7.69245 5.90056 7.646 5.854L5.646 3.854C5.55211 3.76011 5.49937 3.63278 5.49937 3.5C5.49937 3.36722 5.55211 3.23989 5.646 3.146C5.73989 3.05211 5.86722 2.99937 6 2.99937C6.13278 2.99937 6.26011 3.05211 6.354 3.146L7.5 4.293V0.5C7.5 0.367392 7.55268 0.240215 7.64645 0.146447C7.74021 0.0526784 7.86739 0 8 0V0ZM7.5 11.707L6.354 12.854C6.26011 12.9479 6.13278 13.0006 6 13.0006C5.86722 13.0006 5.73989 12.9479 5.646 12.854C5.55211 12.7601 5.49937 12.6328 5.49937 12.5C5.49937 12.3672 5.55211 12.2399 5.646 12.146L7.646 10.146C7.69245 10.0994 7.74762 10.0625 7.80837 10.0373C7.86911 10.0121 7.93423 9.99911 8 9.99911C8.06577 9.99911 8.13089 10.0121 8.19163 10.0373C8.25238 10.0625 8.30755 10.0994 8.354 10.146L10.354 12.146C10.4479 12.2399 10.5006 12.3672 10.5006 12.5C10.5006 12.6328 10.4479 12.7601 10.354 12.854C10.2601 12.9479 10.1328 13.0006 10 13.0006C9.86722 13.0006 9.73989 12.9479 9.646 12.854L8.5 11.707V15.5C8.5 15.6326 8.44732 15.7598 8.35355 15.8536C8.25979 15.9473 8.13261 16 8 16C7.86739 16 7.74021 15.9473 7.64645 15.8536C7.55268 15.7598 7.5 15.6326 7.5 15.5V11.707Z" fill="#212529"></path>
</svg> <small class="tips-text"><font color="#1A1A1A"><t9n>[RU]Фиксировано[EN]Fixed heigth</t9n></font></small>
		</a>
		<a btn="ultra.png" onclick="tbCompact('4')" id="ultra" title="<t9n>[RU]Ограниченная ширина ячеек[EN]Fixed cell width</t9n>" style="display:none">
			<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M8 15C7.86739 15 7.74021 14.9473 7.64645 14.8536C7.55268 14.7598 7.5 14.6326 7.5 14.5L7.5 1.5C7.5 1.36739 7.55268 1.24021 7.64645 1.14645C7.74021 1.05268 7.86739 1 8 1C8.13261 1 8.25979 1.05268 8.35355 1.14645C8.44732 1.24021 8.5 1.36739 8.5 1.5V14.5C8.5 14.6326 8.44732 14.7598 8.35355 14.8536C8.25979 14.9473 8.13261 15 8 15V15ZM0 8C0 7.86739 0.0526784 7.74021 0.146447 7.64645C0.240215 7.55268 0.367392 7.5 0.5 7.5H4.293L3.146 6.354C3.05211 6.26011 2.99937 6.13278 2.99937 6C2.99937 5.86722 3.05211 5.73989 3.146 5.646C3.23989 5.55211 3.36722 5.49937 3.5 5.49937C3.63278 5.49937 3.76011 5.55211 3.854 5.646L5.854 7.646C5.90056 7.69245 5.93751 7.74762 5.96271 7.80837C5.98792 7.86911 6.00089 7.93423 6.00089 8C6.00089 8.06577 5.98792 8.13089 5.96271 8.19163C5.93751 8.25238 5.90056 8.30755 5.854 8.354L3.854 10.354C3.76011 10.4479 3.63278 10.5006 3.5 10.5006C3.36722 10.5006 3.23989 10.4479 3.146 10.354C3.05211 10.2601 2.99937 10.1328 2.99937 10C2.99937 9.86722 3.05211 9.73989 3.146 9.646L4.293 8.5H0.5C0.367392 8.5 0.240215 8.44732 0.146447 8.35355C0.0526784 8.25979 0 8.13261 0 8H0ZM11.707 8.5L12.854 9.646C12.9479 9.73989 13.0006 9.86722 13.0006 10C13.0006 10.1328 12.9479 10.2601 12.854 10.354C12.7601 10.4479 12.6328 10.5006 12.5 10.5006C12.3672 10.5006 12.2399 10.4479 12.146 10.354L10.146 8.354C10.0994 8.30755 10.0625 8.25238 10.0373 8.19163C10.0121 8.13089 9.99911 8.06577 9.99911 8C9.99911 7.93423 10.0121 7.86911 10.0373 7.80837C10.0625 7.74762 10.0994 7.69245 10.146 7.646L12.146 5.646C12.2399 5.55211 12.3672 5.49937 12.5 5.49937C12.6328 5.49937 12.7601 5.55211 12.854 5.646C12.9479 5.73989 13.0006 5.86722 13.0006 6C13.0006 6.13278 12.9479 6.26011 12.854 6.354L11.707 7.5H15.5C15.6326 7.5 15.7598 7.55268 15.8536 7.64645C15.9473 7.74021 16 7.86739 16 8C16 8.13261 15.9473 8.25979 15.8536 8.35355C15.7598 8.44732 15.6326 8.5 15.5 8.5H11.707Z" fill="#212529"></path>
</svg> <small class="tips-text"><font color="#1A1A1A"><t9n>[RU]Фикс. ширина[EN]Fixed width</t9n></font></small>
		</a>
		<a title="<t9n>[RU]Переносить имена колонок в шапке[EN]Wrap column names in the table</t9n>" id="wrapHead" onclick="wrapHead()">
			<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 1.5C14.6326 1.5 14.7598 1.55268 14.8536 1.64645C14.9473 1.74021 15 1.86739 15 2V6.8C15 7.1283 14.9353 7.45339 14.8097 7.75671C14.6841 8.06002 14.4999 8.33562 14.2678 8.56777C14.0356 8.79991 13.76 8.98406 13.4567 9.1097C13.1534 9.23534 12.8283 9.3 12.5 9.3H2.707L6.054 12.646C6.14789 12.7399 6.20063 12.8672 6.20063 13C6.20063 13.1328 6.14789 13.2601 6.054 13.354C5.96011 13.4479 5.83278 13.5006 5.7 13.5006C5.56722 13.5006 5.43989 13.4479 5.346 13.354L1.146 9.154C1.09944 9.10755 1.0625 9.05238 1.03729 8.99163C1.01208 8.93089 0.999107 8.86577 0.999107 8.8C0.999107 8.73423 1.01208 8.66911 1.03729 8.60837C1.0625 8.54762 1.09944 8.49245 1.146 8.446L5.146 4.446C5.23989 4.35211 5.36723 4.29937 5.5 4.29937C5.63278 4.29937 5.76011 4.35211 5.854 4.446C5.94789 4.53989 6.00063 4.66722 6.00063 4.8C6.00063 4.93278 5.94789 5.06011 5.854 5.154L2.707 8.3H12.5C12.8978 8.3 13.2794 8.14196 13.5607 7.86066C13.842 7.57936 14 7.19782 14 6.8V2C14 1.86739 14.0527 1.74021 14.1464 1.64645C14.2402 1.55268 14.3674 1.5 14.5 1.5Z" fill="#212529"></path>
</svg>
			<small class="tips-text"><font color="#1A1A1A"><t9n>[RU]Шапка[EN]Wrap header</t9n>&nbsp;</font></small>
		</a>
		<a btn="view-details.png" title="<t9n>[RU]Не сокращать содержимое ячеек до 127 символов[EN]Display full cell content, not limited to 127 chars</t9n>" id="limit-text" onclick="byId('full').value=byId('full').value?'':1;sendForm()">
			<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2 12.5C2 12.3674 2.05268 12.2402 2.14645 12.1464C2.24021 12.0527 2.36739 12 2.5 12H9.5C9.63261 12 9.75979 12.0527 9.85355 12.1464C9.94732 12.2402 10 12.3674 10 12.5C10 12.6326 9.94732 12.7598 9.85355 12.8536C9.75979 12.9473 9.63261 13 9.5 13H2.5C2.36739 13 2.24021 12.9473 2.14645 12.8536C2.05268 12.7598 2 12.6326 2 12.5ZM2 9.5C2 9.36739 2.05268 9.24021 2.14645 9.14645C2.24021 9.05268 2.36739 9 2.5 9H13.5C13.6326 9 13.7598 9.05268 13.8536 9.14645C13.9473 9.24021 14 9.36739 14 9.5C14 9.63261 13.9473 9.75979 13.8536 9.85355C13.7598 9.94732 13.6326 10 13.5 10H2.5C2.36739 10 2.24021 9.94732 2.14645 9.85355C2.05268 9.75979 2 9.63261 2 9.5ZM2 6.5C2 6.36739 2.05268 6.24021 2.14645 6.14645C2.24021 6.05268 2.36739 6 2.5 6H13.5C13.6326 6 13.7598 6.05268 13.8536 6.14645C13.9473 6.24021 14 6.36739 14 6.5C14 6.63261 13.9473 6.75979 13.8536 6.85355C13.7598 6.94732 13.6326 7 13.5 7H2.5C2.36739 7 2.24021 6.94732 2.14645 6.85355C2.05268 6.75979 2 6.63261 2 6.5ZM2 3.5C2 3.36739 2.05268 3.24021 2.14645 3.14645C2.24021 3.05268 2.36739 3 2.5 3H13.5C13.6326 3 13.7598 3.05268 13.8536 3.14645C13.9473 3.24021 14 3.36739 14 3.5C14 3.63261 13.9473 3.75979 13.8536 3.85355C13.7598 3.94732 13.6326 4 13.5 4H2.5C2.36739 4 2.24021 3.94732 2.14645 3.85355C2.05268 3.75979 2 3.63261 2 3.5Z" fill="#212529"></path>
</svg>
			<small class="tips-text"><font color="#1A1A1A"><t9n>[RU]Не сокращать[EN]Full text</t9n></font></small>
		</a>
		<a btn="view-details.png" title="<t9n>[RU]Сокращать отображаемое содержимое ячеек[EN]Limit the displayed cell content</t9n>" id="full-text" onclick="byId('full').value=byId('full').value?1:'';sendForm()" style="display:none">
			<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2 10.5C2 10.3674 2.05268 10.2402 2.14645 10.1464C2.24021 10.0527 2.36739 10 2.5 10H5.5C5.63261 10 5.75979 10.0527 5.85355 10.1464C5.94732 10.2402 6 10.3674 6 10.5C6 10.6326 5.94732 10.7598 5.85355 10.8536C5.75979 10.9473 5.63261 11 5.5 11H2.5C2.36739 11 2.24021 10.9473 2.14645 10.8536C2.05268 10.7598 2 10.6326 2 10.5ZM2 7.5C2 7.36739 2.05268 7.24021 2.14645 7.14645C2.24021 7.05268 2.36739 7 2.5 7H9.5C9.63261 7 9.75979 7.05268 9.85355 7.14645C9.94732 7.24021 10 7.36739 10 7.5C10 7.63261 9.94732 7.75979 9.85355 7.85355C9.75979 7.94732 9.63261 8 9.5 8H2.5C2.36739 8 2.24021 7.94732 2.14645 7.85355C2.05268 7.75979 2 7.63261 2 7.5ZM2 4.5C2 4.36739 2.05268 4.24021 2.14645 4.14645C2.24021 4.05268 2.36739 4 2.5 4H13.5C13.6326 4 13.7598 4.05268 13.8536 4.14645C13.9473 4.24021 14 4.36739 14 4.5C14 4.63261 13.9473 4.75979 13.8536 4.85355C13.7598 4.94732 13.6326 5 13.5 5H2.5C2.36739 5 2.24021 4.94732 2.14645 4.85355C2.05268 4.75979 2 4.63261 2 4.5Z" fill="#212529"></path>
</svg><small class="tips-text"><font color="#1A1A1A"><t9n>[RU]Cократить[EN]Limit text</t9n></font></small>
		</a>
							
		<a btn="export-csv.png" class="export" title="<t9n>[RU]Экспорт в файл CSV[EN]Export CSV format</t9n>" onclick="byId('exp').name='csv';sendForm()" style="display:none;">
			<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M0.5 9.9C0.632608 9.9 0.759785 9.95268 0.853553 10.0464C0.947322 10.1402 1 10.2674 1 10.4V12.9C1 13.1652 1.10536 13.4196 1.29289 13.6071C1.48043 13.7946 1.73478 13.9 2 13.9H14C14.2652 13.9 14.5196 13.7946 14.7071 13.6071C14.8946 13.4196 15 13.1652 15 12.9V10.4C15 10.2674 15.0527 10.1402 15.1464 10.0464C15.2402 9.95268 15.3674 9.9 15.5 9.9C15.6326 9.9 15.7598 9.95268 15.8536 10.0464C15.9473 10.1402 16 10.2674 16 10.4V12.9C16 13.4304 15.7893 13.9391 15.4142 14.3142C15.0391 14.6893 14.5304 14.9 14 14.9H2C1.46957 14.9 0.960859 14.6893 0.585786 14.3142C0.210714 13.9391 0 13.4304 0 12.9V10.4C0 10.2674 0.0526784 10.1402 0.146447 10.0464C0.240215 9.95268 0.367392 9.9 0.5 9.9Z" fill="#212529"/>
<path d="M7.646 11.854C7.69245 11.9006 7.74762 11.9375 7.80837 11.9627C7.86911 11.9879 7.93423 12.0009 8 12.0009C8.06577 12.0009 8.13089 11.9879 8.19163 11.9627C8.25238 11.9375 8.30755 11.9006 8.354 11.854L11.354 8.854C11.4479 8.76011 11.5006 8.63278 11.5006 8.5C11.5006 8.36722 11.4479 8.23989 11.354 8.146C11.2601 8.05211 11.1328 7.99937 11 7.99937C10.8672 7.99937 10.7399 8.05211 10.646 8.146L8.5 10.293V1.5C8.5 1.36739 8.44732 1.24021 8.35355 1.14645C8.25979 1.05268 8.13261 1 8 1C7.86739 1 7.74021 1.05268 7.64645 1.14645C7.55268 1.24021 7.5 1.36739 7.5 1.5V10.293L5.354 8.146C5.26011 8.05211 5.13278 7.99937 5 7.99937C4.86722 7.99937 4.73989 8.05211 4.646 8.146C4.55211 8.23989 4.49937 8.36722 4.49937 8.5C4.49937 8.63278 4.55211 8.76011 4.646 8.854L7.646 11.854Z" fill="#212529"/>
</svg> <small class="tips-text"><font color="#1A1A1A"><t9n>[RU]Скачать CSV[EN]Dump CSV</t9n></font></small>
		</a>
		<!-- Begin:&DELETE -->{OK}
			<a btn="delete.png" id="del" title="<t9n>[RU]Удалить записи, удовлетворяющие заданному фильтру[EN]Delete the selection</t9n>" onclick="count2del();$('#controls').toggleClass('hidden');$('#confirm_del').toggleClass('hidden')">
				<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6.5 1H9.5C9.63261 1 9.75979 1.05268 9.85355 1.14645C9.94732 1.24021 10 1.36739 10 1.5V2.5H6V1.5C6 1.36739 6.05268 1.24021 6.14645 1.14645C6.24021 1.05268 6.36739 1 6.5 1ZM11 2.5V1.5C11 1.10218 10.842 0.720644 10.5607 0.43934C10.2794 0.158035 9.89782 0 9.5 0L6.5 0C6.10218 0 5.72064 0.158035 5.43934 0.43934C5.15804 0.720644 5 1.10218 5 1.5V2.5H2.506C2.50267 2.49997 2.49933 2.49997 2.496 2.5H1.5C1.36739 2.5 1.24021 2.55268 1.14645 2.64645C1.05268 2.74021 1 2.86739 1 3C1 3.13261 1.05268 3.25979 1.14645 3.35355C1.24021 3.44732 1.36739 3.5 1.5 3.5H2.038L2.891 14.16C2.93122 14.6612 3.15875 15.1289 3.52827 15.4698C3.8978 15.8108 4.38219 16.0001 4.885 16H11.115C11.6178 16.0001 12.1022 15.8108 12.4717 15.4698C12.8412 15.1289 13.0688 14.6612 13.109 14.16L13.962 3.5H14.5C14.6326 3.5 14.7598 3.44732 14.8536 3.35355C14.9473 3.25979 15 3.13261 15 3C15 2.86739 14.9473 2.74021 14.8536 2.64645C14.7598 2.55268 14.6326 2.5 14.5 2.5H13.505C13.5017 2.49997 13.4983 2.49997 13.495 2.5H11ZM12.958 3.5L12.112 14.08C12.0919 14.3306 11.9781 14.5644 11.7934 14.7349C11.6086 14.9054 11.3664 15.0001 11.115 15H4.885C4.6336 15.0001 4.3914 14.9054 4.20664 14.7349C4.02188 14.5644 3.90811 14.3306 3.888 14.08L3.042 3.5H12.958ZM5.471 4.5C5.60333 4.49235 5.73329 4.53756 5.8323 4.6257C5.93131 4.71383 5.99127 4.83767 5.999 4.97L6.499 13.47C6.50425 13.6008 6.45802 13.7284 6.37022 13.8255C6.28242 13.9225 6.16006 13.9813 6.02941 13.9892C5.89876 13.997 5.77024 13.9533 5.67144 13.8675C5.57265 13.7816 5.51145 13.6605 5.501 13.53L5 5.03C4.99594 4.96431 5.00489 4.89847 5.02633 4.83625C5.04777 4.77403 5.08129 4.71665 5.12495 4.66741C5.16862 4.61817 5.22158 4.57804 5.28079 4.54931C5.34 4.52058 5.4043 4.50382 5.47 4.5H5.471ZM10.529 4.5C10.5947 4.50382 10.659 4.52058 10.7182 4.54931C10.7774 4.57804 10.8304 4.61817 10.874 4.66741C10.9177 4.71665 10.9512 4.77403 10.9727 4.83625C10.9941 4.89847 11.0031 4.96431 10.999 5.03L10.499 13.53C10.4963 13.5964 10.4804 13.6617 10.4522 13.7219C10.424 13.7821 10.3841 13.8361 10.3348 13.8807C10.2855 13.9254 10.2278 13.9597 10.165 13.9817C10.1023 14.0037 10.0358 14.013 9.9694 14.009C9.90302 14.005 9.8381 13.9878 9.77845 13.9585C9.7188 13.9291 9.6656 13.8881 9.62199 13.8379C9.57837 13.7877 9.5452 13.7293 9.52443 13.6661C9.50365 13.603 9.49569 13.5363 9.501 13.47L10.001 4.97C10.0087 4.83767 10.0687 4.71383 10.1677 4.6257C10.2667 4.53756 10.3967 4.49235 10.529 4.5ZM8 4.5C8.13261 4.5 8.25979 4.55268 8.35355 4.64645C8.44732 4.74021 8.5 4.86739 8.5 5V13.5C8.5 13.6326 8.44732 13.7598 8.35355 13.8536C8.25979 13.9473 8.13261 14 8 14C7.86739 14 7.74021 13.9473 7.64645 13.8536C7.55268 13.7598 7.5 13.6326 7.5 13.5V5C7.5 4.86739 7.55268 4.74021 7.64645 4.64645C7.74021 4.55268 7.86739 4.5 8 4.5Z" fill="black"/>
</svg> <small class="tips-text"><font color="#1A1A1A"><t9n>[RU]Удалить[EN]Delete</t9n></font></small>
			</a>
		<!-- End:&DELETE -->
		<a title="<t9n>[RU]Другие настройки[EN]More options</t9n>" onclick="$('.controls-left').toggle()">
			<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3 9.5C2.60218 9.5 2.22064 9.34196 1.93934 9.06066C1.65804 8.77936 1.5 8.39782 1.5 8C1.5 7.60218 1.65804 7.22064 1.93934 6.93934C2.22064 6.65804 2.60218 6.5 3 6.5C3.39782 6.5 3.77936 6.65804 4.06066 6.93934C4.34196 7.22064 4.5 7.60218 4.5 8C4.5 8.39782 4.34196 8.77936 4.06066 9.06066C3.77936 9.34196 3.39782 9.5 3 9.5ZM8 9.5C7.60218 9.5 7.22064 9.34196 6.93934 9.06066C6.65804 8.77936 6.5 8.39782 6.5 8C6.5 7.60218 6.65804 7.22064 6.93934 6.93934C7.22064 6.65804 7.60218 6.5 8 6.5C8.39782 6.5 8.77936 6.65804 9.06066 6.93934C9.34196 7.22064 9.5 7.60218 9.5 8C9.5 8.39782 9.34196 8.77936 9.06066 9.06066C8.77936 9.34196 8.39782 9.5 8 9.5ZM13 9.5C12.6022 9.5 12.2206 9.34196 11.9393 9.06066C11.658 8.77936 11.5 8.39782 11.5 8C11.5 7.60218 11.658 7.22064 11.9393 6.93934C12.2206 6.65804 12.6022 6.5 13 6.5C13.3978 6.5 13.7794 6.65804 14.0607 6.93934C14.342 7.22064 14.5 7.60218 14.5 8C14.5 8.39782 14.342 8.77936 14.0607 9.06066C13.7794 9.34196 13.3978 9.5 13 9.5Z" fill="#212529"/>
</svg>
		</a>
	</div>
	<div class="controls-left controls-left-extra" style="display:none;">
		<a id="allowInline" title="<t9n>[RU]Редактировать в таблице[EN]Edit cells directly</t9n>" onclick="editInline()">
			<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M15.502 1.93991C15.5954 2.03363 15.6479 2.16057 15.6479 2.2929C15.6479 2.42524 15.5954 2.55218 15.502 2.6459L14.459 3.6899L12.459 1.68991L13.502 0.645905C13.5958 0.552169 13.7229 0.499512 13.8555 0.499512C13.9881 0.499512 14.1152 0.552169 14.209 0.645905L15.502 1.93891V1.93991ZM13.752 4.3959L11.752 2.3959L4.939 9.2099C4.88396 9.26493 4.84253 9.33204 4.818 9.4059L4.013 11.8199C3.9984 11.8639 3.99633 11.9111 4.00701 11.9562C4.0177 12.0014 4.04072 12.0426 4.07351 12.0754C4.10629 12.1082 4.14755 12.1312 4.19267 12.1419C4.23779 12.1526 4.28499 12.1505 4.329 12.1359L6.743 11.3309C6.81676 11.3067 6.88387 11.2656 6.939 11.2109L13.752 4.3959Z" fill="#212529"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M1 13.4999C1 13.8977 1.15804 14.2793 1.43934 14.5606C1.72064 14.8419 2.10218 14.9999 2.5 14.9999H13.5C13.8978 14.9999 14.2794 14.8419 14.5607 14.5606C14.842 14.2793 15 13.8977 15 13.4999V7.49991C15 7.3673 14.9473 7.24012 14.8536 7.14635C14.7598 7.05258 14.6326 6.99991 14.5 6.99991C14.3674 6.99991 14.2402 7.05258 14.1464 7.14635C14.0527 7.24012 14 7.3673 14 7.49991V13.4999C14 13.6325 13.9473 13.7597 13.8536 13.8535C13.7598 13.9472 13.6326 13.9999 13.5 13.9999H2.5C2.36739 13.9999 2.24021 13.9472 2.14645 13.8535C2.05268 13.7597 2 13.6325 2 13.4999V2.4999C2 2.3673 2.05268 2.24012 2.14645 2.14635C2.24021 2.05258 2.36739 1.9999 2.5 1.9999H9C9.13261 1.9999 9.25979 1.94723 9.35355 1.85346C9.44732 1.75969 9.5 1.63251 9.5 1.4999C9.5 1.3673 9.44732 1.24012 9.35355 1.14635C9.25979 1.05258 9.13261 0.999905 9 0.999905H2.5C2.10218 0.999905 1.72064 1.15794 1.43934 1.43924C1.15804 1.72055 1 2.10208 1 2.4999V13.4999Z" fill="#212529"/>
</svg> <small class="tips-text"><font color="#1A1A1A"><t9n>[RU]Режим правки[EN]Inline edit</t9n>&nbsp;</font></small>
		</a>
		<a btn="database-export.png" class="export" title="<t9n>[RU]Экспорт файла BKI[EN]Export BKI file</t9n>" onclick="byId('exp').name='bki';sendForm()" style="display:none;">
			<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_9_199392)">
<path d="M4.406 1.342C5.40548 0.480135 6.68024 0.00413852 8 0C10.69 0 12.923 2 13.166 4.579C14.758 4.804 16 6.137 16 7.773C16 9.569 14.502 11 12.687 11H10C9.86739 11 9.74021 10.9473 9.64645 10.8536C9.55268 10.7598 9.5 10.6326 9.5 10.5C9.5 10.3674 9.55268 10.2402 9.64645 10.1464C9.74021 10.0527 9.86739 10 10 10H12.688C13.979 10 15 8.988 15 7.773C15 6.557 13.98 5.545 12.687 5.545H12.187V5.045C12.188 2.825 10.328 1 8 1C6.91988 1.00431 5.87684 1.39443 5.059 2.1C4.302 2.752 3.906 3.538 3.906 4.155V4.603L3.461 4.652C2.064 4.805 1 5.952 1 7.318C1 8.785 2.23 10 3.781 10H6C6.13261 10 6.25979 10.0527 6.35355 10.1464C6.44732 10.2402 6.5 10.3674 6.5 10.5C6.5 10.6326 6.44732 10.7598 6.35355 10.8536C6.25979 10.9473 6.13261 11 6 11H3.781C1.708 11 0 9.366 0 7.318C0 5.555 1.266 4.095 2.942 3.725C3.085 2.862 3.64 2.002 4.406 1.342Z" fill="#212529"/>
<path d="M7.646 15.854C7.69245 15.9006 7.74762 15.9375 7.80837 15.9627C7.86911 15.9879 7.93423 16.0009 8 16.0009C8.06577 16.0009 8.13089 15.9879 8.19163 15.9627C8.25238 15.9375 8.30755 15.9006 8.354 15.854L11.354 12.854C11.4479 12.7601 11.5006 12.6328 11.5006 12.5C11.5006 12.3672 11.4479 12.2399 11.354 12.146C11.2601 12.0521 11.1328 11.9994 11 11.9994C10.8672 11.9994 10.7399 12.0521 10.646 12.146L8.5 14.293V5.5C8.5 5.36739 8.44732 5.24021 8.35355 5.14645C8.25979 5.05268 8.13261 5 8 5C7.86739 5 7.74021 5.05268 7.64645 5.14645C7.55268 5.24021 7.5 5.36739 7.5 5.5V14.293L5.354 12.146C5.26011 12.0521 5.13278 11.9994 5 11.9994C4.86722 11.9994 4.73989 12.0521 4.646 12.146C4.55211 12.2399 4.49937 12.3672 4.49937 12.5C4.49937 12.6328 4.55211 12.7601 4.646 12.854L7.646 15.854Z" fill="#212529"/>
</g>
<defs>
<clipPath id="clip0_9_199392">
<rect width="16" height="16" fill="white"/>
</clipPath>
</defs>
</svg> <small class="tips-text"><font color="#1A1A1A"><t9n>[RU]Экспорт BKI[EN]Export BKI</t9n></font></small>
		</a>
		<a btn="database-restore.png" class="export" title="<t9n>[RU]Импорт файла BKI[EN]Import BKI file</t9n>" onclick="$('#bki').toggleClass('hidden');$('#controls').toggleClass('hidden')" style="display:none;">
			<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M4.406 1.342C5.40548 0.480135 6.68024 0.00413852 8 0C10.69 0 12.923 2 13.166 4.579C14.758 4.804 16 6.137 16 7.773C16 9.569 14.502 11 12.687 11H10C9.86739 11 9.74021 10.9473 9.64645 10.8536C9.55268 10.7598 9.5 10.6326 9.5 10.5C9.5 10.3674 9.55268 10.2402 9.64645 10.1464C9.74021 10.0527 9.86739 10 10 10H12.688C13.979 10 15 8.988 15 7.773C15 6.557 13.98 5.545 12.687 5.545H12.187V5.045C12.188 2.825 10.328 1 8 1C6.91988 1.00431 5.87684 1.39443 5.059 2.1C4.302 2.752 3.906 3.538 3.906 4.155V4.603L3.461 4.652C2.064 4.805 1 5.952 1 7.318C1 8.785 2.23 10 3.781 10H6C6.13261 10 6.25979 10.0527 6.35355 10.1464C6.44732 10.2402 6.5 10.3674 6.5 10.5C6.5 10.6326 6.44732 10.7598 6.35355 10.8536C6.25979 10.9473 6.13261 11 6 11H3.781C1.708 11 0 9.366 0 7.318C0 5.555 1.266 4.095 2.942 3.725C3.085 2.862 3.64 2.002 4.406 1.342Z" fill="#212529"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M7.646 4.146C7.69245 4.09944 7.74762 4.06249 7.80837 4.03729C7.86911 4.01208 7.93423 3.99911 8 3.99911C8.06577 3.99911 8.13089 4.01208 8.19163 4.03729C8.25238 4.06249 8.30755 4.09944 8.354 4.146L11.354 7.146C11.4479 7.23989 11.5006 7.36722 11.5006 7.5C11.5006 7.63278 11.4479 7.76011 11.354 7.854C11.2601 7.94789 11.1328 8.00063 11 8.00063C10.8672 8.00063 10.7399 7.94789 10.646 7.854L8.5 5.707V14.5C8.5 14.6326 8.44732 14.7598 8.35355 14.8536C8.25979 14.9473 8.13261 15 8 15C7.86739 15 7.74021 14.9473 7.64645 14.8536C7.55268 14.7598 7.5 14.6326 7.5 14.5V5.707L5.354 7.854C5.26011 7.94789 5.13278 8.00063 5 8.00063C4.86722 8.00063 4.73989 7.94789 4.646 7.854C4.55211 7.76011 4.49937 7.63278 4.49937 7.5C4.49937 7.36722 4.55211 7.23989 4.646 7.146L7.646 4.146Z" fill="#212529"/>
</svg> <small class="tips-text"><font color="#1A1A1A"><t9n>[RU]Импорт BKI[EN]Import BKI</t9n></font></small>
		</a>
		<a title="<t9n>[RU]Вернуться[EN]Back</t9n>" onclick="$('.controls-left').toggle()">
			<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9.5 13C9.5 13.3978 9.34196 13.7794 9.06066 14.0607C8.77936 14.342 8.39782 14.5 8 14.5C7.60218 14.5 7.22064 14.342 6.93934 14.0607C6.65804 13.7794 6.5 13.3978 6.5 13C6.5 12.6022 6.65804 12.2206 6.93934 11.9393C7.22064 11.658 7.60218 11.5 8 11.5C8.39782 11.5 8.77936 11.658 9.06066 11.9393C9.34196 12.2206 9.5 12.6022 9.5 13ZM9.5 8C9.5 8.39782 9.34196 8.77936 9.06066 9.06066C8.77936 9.34196 8.39782 9.5 8 9.5C7.60218 9.5 7.22064 9.34196 6.93934 9.06066C6.65804 8.77936 6.5 8.39782 6.5 8C6.5 7.60218 6.65804 7.22064 6.93934 6.93934C7.22064 6.65804 7.60218 6.5 8 6.5C8.39782 6.5 8.77936 6.65804 9.06066 6.93934C9.34196 7.22064 9.5 7.60218 9.5 8ZM9.5 3C9.5 3.39782 9.34196 3.77936 9.06066 4.06066C8.77936 4.34196 8.39782 4.5 8 4.5C7.60218 4.5 7.22064 4.34196 6.93934 4.06066C6.65804 3.77936 6.5 3.39782 6.5 3C6.5 2.60218 6.65804 2.22064 6.93934 1.93934C7.22064 1.65804 7.60218 1.5 8 1.5C8.39782 1.5 8.77936 1.65804 9.06066 1.93934C9.34196 2.22064 9.5 2.60218 9.5 3Z" fill="#212529"/>
</svg>
		</a>
	</div>
	<div> </div>
	<div class="controls-right  ml-2">
		<a btn="settings.png" onclick="toggleSettings()" title="<t9n>[RU]Настройки панели управления[EN]Control panel settings</t9n>">
			<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_1_15712)">
<rect width="18" height="18" fill="white" fill-opacity="0.01"/>
<g clip-path="url(#clip1_1_15712)">
<path d="M8.99993 5.34819C8.52037 5.34819 8.04551 5.44264 7.60246 5.62616C7.15941 5.80968 6.75684 6.07866 6.41775 6.41776C6.07865 6.75686 5.80967 7.15942 5.62615 7.60247C5.44263 8.04552 5.34818 8.52038 5.34818 8.99994C5.34818 9.47949 5.44263 9.95435 5.62615 10.3974C5.80967 10.8405 6.07865 11.243 6.41775 11.5821C6.75684 11.9212 7.15941 12.1902 7.60246 12.3737C8.04551 12.5572 8.52037 12.6517 8.99993 12.6517C9.96843 12.6517 10.8973 12.267 11.5821 11.5821C12.2669 10.8973 12.6517 9.96844 12.6517 8.99994C12.6517 8.03143 12.2669 7.1026 11.5821 6.41776C10.8973 5.73292 9.96843 5.34819 8.99993 5.34819ZM6.47318 8.99994C6.47318 8.3298 6.73939 7.68711 7.21324 7.21325C7.6871 6.7394 8.32979 6.47319 8.99993 6.47319C9.67006 6.47319 10.3128 6.7394 10.7866 7.21325C11.2605 7.68711 11.5267 8.3298 11.5267 8.99994C11.5267 9.67007 11.2605 10.3128 10.7866 10.7866C10.3128 11.2605 9.67006 11.5267 8.99993 11.5267C8.32979 11.5267 7.6871 11.2605 7.21324 10.7866C6.73939 10.3128 6.47318 9.67007 6.47318 8.99994Z" fill="#212529"/>
<path d="M11.0204 1.51081C10.4276 -0.502938 7.5723 -0.502938 6.97943 1.51081L6.87368 1.86969C6.83227 2.01026 6.75994 2.13978 6.66197 2.24877C6.564 2.35775 6.44289 2.44343 6.30751 2.49952C6.17213 2.55561 6.02591 2.5807 5.87957 2.57294C5.73324 2.56519 5.59049 2.52478 5.4618 2.45469L5.1333 2.27469C3.2883 1.27119 1.27118 3.28944 2.2758 5.13331L2.45468 5.46181C2.52477 5.5905 2.56518 5.73325 2.57293 5.87959C2.58069 6.02592 2.5556 6.17214 2.49951 6.30752C2.44342 6.4429 2.35774 6.56401 2.24875 6.66198C2.13977 6.75995 2.01025 6.83228 1.86968 6.87369L1.5108 6.97944C-0.502949 7.57231 -0.502949 10.4276 1.5108 11.0204L1.86968 11.1262C2.01025 11.1676 2.13977 11.2399 2.24875 11.3379C2.35774 11.4359 2.44342 11.557 2.49951 11.6924C2.5556 11.8277 2.58069 11.974 2.57293 12.1203C2.56518 12.2666 2.52477 12.4094 2.45468 12.5381L2.27468 12.8666C1.27118 14.7116 3.2883 16.7298 5.1333 15.7241L5.4618 15.5452C5.59049 15.4751 5.73324 15.4347 5.87957 15.4269C6.02591 15.4192 6.17213 15.4443 6.30751 15.5004C6.44289 15.5564 6.564 15.6421 6.66197 15.7511C6.75994 15.8601 6.83227 15.9896 6.87368 16.1302L6.97943 16.4891C7.5723 18.5028 10.4276 18.5028 11.0204 16.4891L11.1262 16.1302C11.1676 15.9896 11.2399 15.8601 11.3379 15.7511C11.4358 15.6421 11.557 15.5564 11.6923 15.5004C11.8277 15.4443 11.9739 15.4192 12.1203 15.4269C12.2666 15.4347 12.4094 15.4751 12.5381 15.5452L12.8666 15.7252C14.7116 16.7298 16.7298 14.7104 15.7241 12.8666L15.5452 12.5381C15.4751 12.4094 15.4347 12.2666 15.4269 12.1203C15.4192 11.974 15.4442 11.8277 15.5003 11.6924C15.5564 11.557 15.6421 11.4359 15.7511 11.3379C15.8601 11.2399 15.9896 11.1676 16.1302 11.1262L16.489 11.0204C18.5028 10.4276 18.5028 7.57231 16.489 6.97944L16.1302 6.87369C15.9896 6.83228 15.8601 6.75995 15.7511 6.66198C15.6421 6.56401 15.5564 6.4429 15.5003 6.30752C15.4442 6.17214 15.4192 6.02592 15.4269 5.87959C15.4347 5.73325 15.4751 5.5905 15.5452 5.46181L15.7252 5.13331C16.7298 3.28831 14.7104 1.27119 12.8666 2.27581L12.5381 2.45469C12.4094 2.52478 12.2666 2.56519 12.1203 2.57294C11.9739 2.5807 11.8277 2.55561 11.6923 2.49952C11.557 2.44343 11.4358 2.35775 11.3379 2.24877C11.2399 2.13978 11.1676 2.01026 11.1262 1.86969L11.0204 1.51081ZM8.0583 1.82919C8.33505 0.889812 9.6648 0.889812 9.94155 1.82919L10.0473 2.18806C10.1362 2.48966 10.2915 2.76754 10.5017 3.00132C10.712 3.23511 10.9719 3.41888 11.2624 3.53916C11.5529 3.65945 11.8666 3.71319 12.1806 3.69645C12.4946 3.67971 12.8008 3.59292 13.0769 3.44244L13.4043 3.26244C14.2638 2.79556 15.2043 3.73494 14.7363 4.59556L14.5574 4.92406C14.4072 5.20017 14.3206 5.50639 14.304 5.8203C14.2875 6.13421 14.3414 6.44784 14.4617 6.73822C14.5821 7.0286 14.7659 7.28837 14.9997 7.49849C15.2335 7.70861 15.5114 7.86375 15.8129 7.95256L16.1707 8.05831C17.1101 8.33506 17.1101 9.66481 16.1707 9.94156L15.8118 10.0473C15.5102 10.1362 15.2323 10.2915 14.9985 10.5017C14.7648 10.712 14.581 10.9719 14.4607 11.2624C14.3404 11.5529 14.2867 11.8667 14.3034 12.1806C14.3202 12.4946 14.4069 12.8009 14.5574 13.0769L14.7374 13.4043C15.2043 14.2638 14.2649 15.2043 13.4043 14.7363L13.0769 14.5574C12.8008 14.407 12.4944 14.3202 12.1804 14.3036C11.8664 14.2869 11.5526 14.3407 11.2621 14.4611C10.9715 14.5815 10.7116 14.7654 10.5014 14.9993C10.2912 15.2332 10.1361 15.5112 10.0473 15.8129L9.94155 16.1707C9.6648 17.1101 8.33505 17.1101 8.0583 16.1707L7.95255 15.8118C7.86361 15.5104 7.70837 15.2326 7.4982 14.999C7.28802 14.7653 7.02824 14.5816 6.73788 14.4613C6.44751 14.3411 6.13392 14.2873 5.82008 14.3039C5.50623 14.3205 5.20008 14.4072 4.92405 14.5574L4.59555 14.7374C3.73605 15.2043 2.79555 14.2649 3.26355 13.4043L3.44243 13.0769C3.59312 12.8008 3.68008 12.4945 3.69693 12.1804C3.71378 11.8662 3.66008 11.5523 3.53979 11.2617C3.41949 10.971 3.23564 10.711 3.00174 10.5007C2.76783 10.2903 2.4898 10.135 2.18805 10.0462L1.82918 9.94044C0.889801 9.66369 0.889801 8.33394 1.82918 8.05719L2.18805 7.95144C2.48933 7.86246 2.76691 7.70724 3.00046 7.49715C3.23401 7.28705 3.41764 7.02739 3.53789 6.73717C3.65814 6.44696 3.71197 6.13352 3.69546 5.81981C3.67894 5.5061 3.59249 5.20005 3.44243 4.92406L3.26243 4.59556C2.79555 3.73606 3.73493 2.79556 4.59555 3.26356L4.92405 3.44244C5.20008 3.59271 5.50623 3.67933 5.82008 3.69596C6.13392 3.71259 6.44751 3.6588 6.73788 3.53853C7.02824 3.41826 7.28802 3.23457 7.4982 3.0009C7.70837 2.76723 7.86361 2.4895 7.95255 2.18806L8.0583 1.82919Z" fill="#212529"/>
</g>
</g>
<defs>
<clipPath id="clip0_1_15712">
<rect width="18" height="18" fill="white"/>
</clipPath>
<clipPath id="clip1_1_15712">
<rect width="18" height="18" fill="white"/>
</clipPath>
</defs>
</svg>
		</a>
		<select id="editInlineAll" onchange="setEditInlineAll(this.value)" class="settings form-control form-control-sm" style="display:none">
			<option value="0">Правка в форме</option>
			<option value="1">Правка в таблицах</option>
		</select>
		<select id="tipsOff" onchange="tipsOff(this.value)" class="settings form-control form-control-sm" style="display:none">
			<option value="">Подписи к кнопкам</option>
			<option value="1">Убрать подписи</option>
		</select>
		<select id="tbSize" onchange="tbSize(this.value)" class="settings form-control form-control-sm" style="display:none">
			<option value="12">12px</option>
			<option value="13">13px</option>
			<option value="14">14px</option>
			<option value="15">15px</option>
			<option value="16">16px</option>
			<option value="18">18px</option>
		</select>
	</div>
</div>
<script>
if(getCookie('wrap_head')==='1'){
	$("<style>.table thead th{ white-space: normal !important; }</style>").appendTo("head");
    $('#wrapHead').toggleClass('button-on');
}
function toggleSettings(){
    if($('.settings').is(':visible')){
        $('.controls-left').show();
        $('.controls-left-extra').hide();
    }
    else
        $('.controls-left,.controls-left-extra').hide();
    $('.settings').toggle();
}
function addRecDone(json){
    var i,val=escapeHtmls(json.val);
    $('.new-rec').attr('old-val',json.val);
    if(addTermTemplate)
        val='<a href="/'+db+'/edit_obj/'+json.id+'">'+escapeHtmls($('option[value='+val+']').html())+'</a>';
    if(json.args.indexOf('exists1=1')!==-1){
        if($('#'+json.id).length>0)
            $('#'+json.id).css('background-color','#fff3cd');
        val='<a href="/'+db+'/'+action+'/'+id+'?F_'+id+'=%40'+json.id+'">'+val+'</a>';
        $('#warn').html(t9n('[RU]Запись '+val+' уже существует[EN]The '+val+' record already exists')).removeClass('hidden');
        return;
    }
    $('.new-rec').closest('tr').attr('id',json.id);
    $('#'+json.id).find('.new-order').html(json.ord);
    $('#'+json.id).find('.editing').html(
        '<a style="display:block" href="/'+db+'/edit_obj/'+json.id+'" title="'+t9n('[RU]Редактировать[EN]Edit')+'">'
			+'<div class="i-edit" style="display: none;">'
			+'	<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">'
			+'		<path d="M17.2857 13.09V17.2857C17.2857 17.7025 17.1201 18.1022 16.8254 18.3969C16.5307 18.6916 16.1311 18.8572 15.7143 18.8572H4.71428C4.29751 18.8572 3.89781 18.6916 3.60311 18.3969C3.30841 18.1022 3.14285 17.7025 3.14285 17.2857V6.28574C3.14285 5.86897 3.30841 5.46927 3.60311 5.17457C3.89781 4.87987 4.29751 4.71431 4.71428 4.71431H8.91M15.7143 3.14288L18.8571 6.28574L11 14.1429H7.85714V11L15.7143 3.14288Z" stroke="#777777" stroke-linecap="round" stroke-linejoin="round"></path>'
			+'	</svg>'
			+'</div>'+val
		+'</a>');
    $('.editing').removeClass('editing');
	$('#tableContainer').freezeTable('update');
    for(i in reqs)
        $('#'+json.id).closest('tr').append('<td align="'+getAlign($('#'+reqs[i]).attr('base'))+'"><div></div></td>');
    $('#'+json.id).find('td').click(inlineEdit);
    $('#'+json.id).find('td')[0].click();
}
function addRec(){
    if(getCookie('edit-inline')||getCookie('edit-inline-all')){
        if($('#newRec').length===0){
            $('.filter-row').after('<tr id="newRec" class="data-row data-row-new" onmouseover="showEdit()" onmouseout="hideEdit()">'
                +($('.parent-info').length===0?'':'<th class="new-order" style="text-align:right"> </th>')
                +'<th align="'+getAlign(id)+'" class="editing">'
                +(addTermTemplate||'<input type="text" old-val="" class="form-control new-rec" onkeydown="if(event.keyCode===13){event.preventDefault();validateNewRec(this)}" onchange="validateNewRec(this)">')
                +'</th></tr>');
            if(addTermTemplate){
                $('select[id=t'+id+']').prepend('<option disabled selected>'+t9n('[RU]Выберите[EN]Please select')+'</option>');
                $('select[id=t'+id+']').on('change',function(){validateNewRec(this)});
                $('select[id=t'+id+']').attr('id','newRec').attr('old-val','').addClass('new-rec');
            }
        }
        $('.new-rec').focus();
        if(Object.keys(selOpts).length===0)
            for(var i in reqs)
                if($('#'+reqs[i]).hasClass('t-ref'))
                    newApi('GET','_ref_reqs/'+$('#'+reqs[i]).attr('id')+'?JSON&LIMIT='+limit,'getRefs');
    }
    else{
        $('#add,#controls').toggle();
        $('#t'+id).focus();
    }
}
function validateNewRec(el){
    if(el.value===$(el).attr('old-val'))
        return;
    if(el.value==='')
        return el.value=$(el).attr('old-val');
	var fd = new FormData();
	fd.append('t'+id,el.value);
	newApi('POST','_m_new/'+id+'?JSON&up={UP}','addRecDone',fd);
}
<!-- Begin:&EXPORT -->{OK}
$('.export').show();
<!-- End:&EXPORT -->
if(getCookie('tips_off')==='1')
	$('#tipsOff').val('1');
</script>
<!-- Begin:&Uni_obj_Parent --><div style="padding: 3px;" class="parent-info"><A HREF="/{_global_.z}/object/{TID}/?F_U={UP}">{TYP}</A>: <A HREF="/{_global_.z}/edit_obj/{_parent_.F_U}">{NAME} ({_parent_.F_U})</A></div>
<script>
	$('.parent-table').find('a').attr('href',$('.parent-table').find('a').attr('href')+'{TID}/?F_U={UP}').html('{TYP}');
	$('.parent-object').find('a').attr('href',$('.parent-object').find('a').attr('href')+'{_parent_.F_U}').html('{NAME}');
	$('.parent-table,.parent-object').show();
</script>
<!-- End:&Uni_obj_Parent -->
<table id="bki" class="controls hidden">
	<tr>
		<td>
		<FORM method="post" ENCTYPE="multipart/form-data" action="/{_global_.z}/object/{ID}">
		<input type="hidden" name="_xsrf" value="{_global_.xsrf}">
		<input type="hidden" name="F_U" value="{F_U}">
		<input class="btn btn-sm" type="file" name="bki_file">
		<button name="import" class="btn btn-sm btn-primary"><t9n>[RU]Импорт[EN]Import</t9n>&nbsp;BKI</button>&nbsp;&nbsp;&nbsp;
		<button type="button" class="btn btn-sm btn-outline-secondary" onclick="$('#controls').toggleClass('hidden'); $('#bki').toggleClass('hidden');">&nbsp;<t9n>[RU]Отменить[EN]Cancel</t9n>&nbsp;</button>
		</FORM>
		</td>
	</tr>
</table>
<table id="confirm_del" class="controls hidden">
	<tr>
		<td>
		<b><t9n>[RU]Подтвердите удаление[EN]Confirm to delete the records</t9n>&nbsp;(<span id="2delete"></span>)&nbsp;&nbsp;&nbsp;</b>
		<nobr>
			<button type="button" class="btn btn-sm btn-warning" onclick="byId('form').method='post';byId('exp').name='_m_del_select';sendForm('post')">&nbsp;<t9n>[RU]Да, удалить[EN]Yes, delete</t9n>&nbsp;</button>
			<button type="button" class="btn btn-sm btn-outline-secondary" onclick="$('#controls').toggleClass('hidden'); $('#confirm_del').toggleClass('hidden');">&nbsp;<t9n>[RU]Отменить[EN]Cancel</t9n>&nbsp;</button>
		</nobr>
		</td>
	</tr>
</table>
<div id="add" style="display:none">
<FORM method="post" action="/{_global_.z}/_m_new/{ID}" ONSUBMIT="addbtn.disabled = true; return true;">
<input type="hidden" name="_xsrf" value="{_global_.xsrf}">
<input type="hidden" name="up" value="{UP}">
<div class="input-group controls t9n" style="max-width:640px">
	<!-- Begin:&New_Req -->{NEW_REQ}
		<input type="text" id="t{_parent_.TYP}" name="t{_parent_.TYP}" placeholder="{_parent_.VAL}" class="form-control">
	<!-- End:&New_Req -->
	<!-- Begin:&New_Req_REPORT_COLUMN -->
		<select id="t{_parent_.TYP}" name="t{_parent_.TYP}" class="form-control">{NEW_REQ}
			<!-- Begin:&Rep_Col_List -->
				<option value="{ID}">{VAL}</option>
			<!-- End:&Rep_Col_List -->
		</select>
	<!-- End:&New_Req_REPORT_COLUMN -->
	<!-- Begin:&New_Req_GRANT -->
		<select id="t{_parent_.TYP}" name="t{_parent_.TYP}" class="form-control">{NEW_REQ}
			<!-- Begin:&Grant_List -->
				<option value="{ID}">{VAL}</option>
			<!-- End:&Grant_List -->
		</select>
	<!-- End:&New_Req_GRANT -->
	<div class="input-group-append">
		<button type="submit" name="addbtn" class="btn btn-primary"><t9n>[RU]Добавить[EN]Create</t9n></button>
		<button class="btn btn-outline-secondary" onclick="$('#controls,#add').toggle();event.preventDefault();"><t9n>[RU]Отменить[EN]Cancel</t9n></button>
	</div>
</div>
</FORM>
</div>
<!-- Begin:&Warnings --><br/><div class="alert alert-danger" role="alert">{WARNING}</div>
<!-- End:&Warnings -->
<div class="new-col t9n modal-form shadow hidden mt-1 mr-1">
	<table>
		<tr>
			<td colspan="2">
				<input id="newCol" type="text" class="form-control" style="margin-bottom: 5px;" placeholder="<t9n>[RU]Имя колонки[EN]Set column name</t9n>" onkeyup="validateNewType()" />
				<div id="typesBox" style="display:none"></div>
			</td>
		</tr>
		<tr>
			<td colspan="2">
				<div><select id="newColBase" class="form-control" onchange="$('#typesBox').hide();validateNewType(true)"></select></div>
			</td>
		</tr>
		<tr>
			<td align="left" title="<t9n>[RU]Поставьте галку, если это будет справочное значение: Тип, Категория и т.п.[EN]Check this to make a dictionary to pick up values</t9n>">
				<label><input id="isref" type="checkbox" class="mt-2" onchange="$('#ismulti').toggle()" value="1" />&nbsp;<t9n>[RU]Справочник[EN]Dictionary</t9n></label><br />
				<label id="ismulti" style="display:none"><input type="checkbox" value="1" />&nbsp;<t9n>[RU]Мульти-выбор[EN]Multi-select</t9n></label>
			</td>
			<td align="right"><input type="submit" class="btn btn-primary btn-sm mt-1" id="newColBtn" disabled="disabled" onclick="addCol()" value="<t9n>[RU]Добавить колонку[EN]Add column</t9n>" /></td>
		</tr>
	</table>
</div>
<FORM id="form" class="freeze-table" method="get" ENCTYPE="multipart/form-data" action="/{_global_.z}/object/{ID}/?F_U={F_U}" onsubmit="sendForm()">
<div id="tableContainer" class="mr-lg-2 ml-lg-2 m-0">
<TABLE id="tb" class="table tb">
	<thead>
	<tr style="background-color:#f5f5f5">
		<!-- Begin:&Head_Ord_N -->
		<th ALIGN="center">{FILLER}N</th>
		<!-- End:&Head_Ord_N -->
		<th ALIGN="center" class="t-table {UNIQUE}" OnClick="$('.filter-row').toggleClass('hidden');" id="{ID}" base="{BASE_TYP}"><A title="{ID}" colid="{ID}" HREF="/{_global_.z}/object/{ID}/?{FILTER}&order_val=val" OnClick="event.stopPropagation();">{VAL}</A></th>
		<!-- Begin:&Uni_Obj_Head -->
		<th ALIGN="center" class="t-column {REF} {MULTI} {ARRAY} {MANDATORY}" granted="{GRANT}" OnClick="$('.filter-row').toggleClass('hidden');" {ARR_TYPE} {REF_TYPE} id="{TYP}" base="{BASE_TYP}">
			<div class="col-header"><A title="{TYP}" colid="{TYP}" HREF="/{_global_.z}/object/{ID}/?{FILTER}&order_val={TYP}" OnClick="event.stopPropagation();">{VAL}</A></div>
		</th>
		<!-- End:&Uni_Obj_Head -->
		<!-- Begin:&Uni_Obj_Head_Links -->
		<th ALIGN="center" OnClick="$('.filter-row').toggleClass('hidden');"><A {VAL}><FONT COLOR="GRAY"><t9n>[RU]Связи[EN]References</t9n></FONT></A></th>
		<!-- End:&Uni_Obj_Head_Links -->
		<!-- Begin:&Head_Move_N_Delete -->
		<th rest="1" OnClick="$('.filter-row').toggleClass('hidden');">{FILLER}&nbsp;</th>
		<!-- End:&Head_Move_N_Delete -->
	</tr>
	</thead>
	<tbody>
	<TR id="filter_row" class="filter-row hidden">
		<!-- Begin:&Head_Ord -->
		<th style="padding:0px;">{FILLER}&nbsp;</th>
		<!-- End:&Head_Ord -->
		<th style="padding:0px;" align="center"><!--{TYP}-->
			<!-- Begin:&Filter_Val_RCM -->
				<input type="text" name="{F_TYP}" value="{FILTER}" size="2" style="width:100%; ">
			<!-- End:&Filter_Val_RCM -->
			<!-- Begin:&Filter_Val_DNS -->
				<nobr><input type="text" name="{F_TYP_FR}" value="{FILTER_FR}" size="2" oninput="this.size=this.value.length+1">-</nobr><input type="text" name="{F_TYP_TO}" value="{FILTER_TO}" size="2" oninput="this.size=this.value.length+1">
			<!-- End:&Filter_Val_DNS -->
		</th>
		<!-- Begin:&Uni_Obj_Head_Filter --><!--{TYP}-->
		<TD style="padding:0px;" align="center">
			<!-- Begin:&Filter_Req_RCM -->
				<input type="text" name="{F_TYP}" id="{_parent_.REF}" value="{FILTER}" size="2" style="width:100%;" class="{_parent_.DD}"><ul id="dd{_parent_.REF}" class="dropdown-menu"><img style="margin:1px" width="25px" src="/i/ajax.gif"></ul>
			<!-- End:&Filter_Req_RCM -->
			<!-- Begin:&Filter_Req_DNS -->
				<nobr><input type="text" name="{F_TYP_FR}" value="{FILTER_FR}" size="1" oninput="this.size=this.value.length+1">-</nobr><input type="text" name="{F_TYP_TO}" value="{FILTER_TO}" size="1" oninput="this.size=this.value.length+1">
			<!-- End:&Filter_Req_DNS -->
		</TD>
		<!-- End:&Uni_Obj_Head_Filter -->
		<script>
			$("input.dropdown-toggle").attr("data-toggle", "dropdown");
			$("input.dropdown-toggle").attr("autocomplete", "off");
			$("input.dropdown-toggle").focus(function(){refreshDD(this.id)});
			$("input.dropdown-toggle").keyup(function(){refreshDD(this.id)});
		</script>
		<!-- Begin:&Uni_Obj_Head_Filter_Links --><!--{VAL}-->
		<TD style="padding:0px;">
			&nbsp;
		</TD>
		<!-- End:&Uni_Obj_Head_Filter_Links -->
		<!-- Begin:&Head_Move_N_Delete -->
		<TD style="padding:0px;">{FILLER}&nbsp;</TD>
		<!-- End:&Head_Move_N_Delete -->
	</TR>
	<!-- Begin:&Uni_Obj_All -->
	<tr id="{ID}" class="data-row" onmouseover="showEdit()" onmouseout="hideEdit()">
		<!-- Begin:&Ord -->
		<th style="text-align:right">{ORD}</th>
		<!-- End:&Ord -->
		<th ALIGN="{ALIGN}" class="t9n" style="border-left: 1px solid #dee2e6;">
			<A style="display:block" HREF="/{_global_.z}/edit_obj/{ID}" TITLE="<t9n>[RU]Редактировать[EN]Edit</t9n>">
				<div class="i-edit">
					<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M17.2857 13.09V17.2857C17.2857 17.7025 17.1201 18.1022 16.8254 18.3969C16.5307 18.6916 16.1311 18.8572 15.7143 18.8572H4.71428C4.29751 18.8572 3.89781 18.6916 3.60311 18.3969C3.30841 18.1022 3.14285 17.7025 3.14285 17.2857V6.28574C3.14285 5.86897 3.30841 5.46927 3.60311 5.17457C3.89781 4.87987 4.29751 4.71431 4.71428 4.71431H8.91M15.7143 3.14288L18.8571 6.28574L11 14.1429H7.85714V11L15.7143 3.14288Z" stroke="#777777" stroke-linecap="round" stroke-linejoin="round"/>
					</svg>
				</div>
				{VAL}
			</A>
		</th>
		<!-- Begin:&Uni_Object_View_Reqs -->
		<TD ALIGN="{ALIGN}" base="{BASE}"><!-- Begin:&multiselectcell --><span id="{ID}" ref="{VAL}" ord="{ORD}" class="badge badge-pill badge-secondary p-2 ml-0 mt-0 mb-1 mr-1">{NAME}</span><!-- End:&multiselectcell --><div>{VAL}</div></TD>
		<!-- End:&Uni_Object_View_Reqs -->
		<!-- -->
		<!-- Begin:&Uni_Object_View_Reqs_Links -->
		<TD ALIGN="center">{VAL}<!-- Begin:&Reqs_Links --><A HREF="/{_global_.z}/object/{VALUE}/?lnx=1&F_{LINKS_TYP}=@{_parent_.ID}"><FONT SIZE="-2" COLOR="GRAY">{KEY}</FONT></A>&nbsp;<!-- End:&Reqs_Links -->&nbsp;
		</TD>
		<!-- End:&Uni_Object_View_Reqs_Links -->
		<!-- Begin:&Move_N_Delete -->
		<TD ALIGN="CENTER" class="t9n pl-1 pr-1 pb-1" style="white-space:nowrap;"><!-- Begin:&Move --><A HREF="#" onclick="post('_m_up/{ID}')" TITLE="<t9n>[RU]Переместить выше[EN]Move up</t9n>"><svg width="26" height="26" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 21V7M14 7L7 14M14 7L21 14" stroke="#1A1A1A" stroke-linecap="round" stroke-linejoin="round"></path></svg></A>&nbsp;<!-- End:&Move --><A href="#" onclick="post('_m_del/{ID}/?up={_parent_.TYP}&f_u={_parent_.F_U}')" TITLE="<t9n>[RU]Удалить[EN]Delete</t9n>"><svg width="25" height="25" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 8H23M10 8V6C10 5.46957 10.2107 4.96086 10.5858 4.58579C10.9609 4.21071 11.4696 4 12 4H16C16.5304 4 17.0391 4.21071 17.4142 4.58579C17.7893 4.96086 18 5.46957 18 6V8M21 8V22C21 22.5304 20.7893 23.0391 20.4142 23.4142C20.0391 23.7893 19.5304 24 19 24H9C8.46957 24 7.96086 23.7893 7.58579 23.4142C7.21071 23.0391 7 22.5304 7 22V8H21Z" stroke="#1A1A1A" stroke-linecap="round" stroke-linejoin="round"></path></svg></A>
		</TD>
		<!-- End:&Move_N_Delete -->
	</tr>
	<!-- End:&Uni_Obj_All -->
	</tbody>
</TABLE>
<div id="notfound" style="display:none" class="m-3">
	<t9n>[RU]Ничего не найдено.[EN]Nothing found.</t9n>
	<span class="searchlink" style="display:none"><t9n> [RU]Попробовать поискать по вхождению строки:[EN]Try searching for substring:</t9n></span>
	<div id="searchlink" class="searchlink" style="display:none">
		<nobr>:column: <a class="link" onclick="setContains(':name:','','%')"><t9n> [RU]начинается с[EN]starts with</t9n> <b>:filter:</b></a> </nobr>
		<nobr>или <a class="link" onclick="setContains(':name:','%','%')"><t9n> [RU]содержит[EN]contains</t9n> <b>:filter:</b></a></nobr><br />
	</div>
	<br /><a target="help" href="https://help.ideav.online/#rec219525382"><t9n class="searchlink">[RU]Правила поиска[EN]Filtering rules</t9n></a>
</div>
</div>
																							  
<input type="hidden" name="F_I" value="{F_I}">
<input type="hidden" name="F_U" value="{F_U}">
<input type="hidden" id="exp" name="" value="1">
<input type="hidden" id="lnx" name="lnx" value="{LNX}">
<input type="hidden" id="full" name="full" value="">
<input type="hidden" id="order_val" name="order_val" value="">
<input type="hidden" id="desc" name="desc" value="">
<!-- Begin:_f_show_all -->
	<input type="hidden" name="f_show_all" value="{_request_.f_show_all}">
<!-- End:_f_show_all -->
<input type="hidden" name="_xsrf" value="{_global_.xsrf}">
<input type="submit" name="prompt" class="btn btn-sm btn-primary hidden">
</FORM>
<!-- Begin:&No_Page -->
<p class="no-pages m-2">
	<t9n>[RU]Показаны не все записи. Показать[EN]Not all the records shown. Show</t9n>: <a href="/{_global_.z}/object/{ID}/?{lnx}&F_U={F_U}&f_show_all=1&pg=2"><t9n>[RU]следующие[EN]next</t9n></a>
	<input type="number" min="5" max="1000" id="default_limit" value="{LIMIT}" onchange="setLimit(this.value)">
</p>
<br>
<!-- End:&No_Page -->
<div class="p8n ml-2 mr-2 mb-5">
<!-- Begin:&Uni_Obj_Pages -->
<span class="ending">{ENDING}</span>&nbsp;&nbsp;<!-- Begin:&Page --><a class="page-link {CLASS}" <!-- Begin:&Page_Href -->href="/{_global_.z}/object/{ID}/?{FILTER}&pg={_parent_.PAGE}"<!-- End:&Page_Href -->> <span >{VAL}</span></a><!-- End:&Page -->
<!-- End:&Uni_Obj_Pages -->
</div>
<div class="edit-table modal-form hidden">
	<ul class="edit">
		<li class="change-val change-val-input" style="display:none">
			<input id="changeVal" class="form-control form-control-sm" onchange="renameTable(this)">
		</li>
		<li class="change-val change-val-btn" onclick="$('.change-val').toggle()">
			<a href="#">
				<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_4312_31862)">
<path d="M12.146 0.146009C12.1924 0.0994455 12.2476 0.0625027 12.3084 0.0372962C12.3691 0.0120898 12.4342 -0.00088501 12.5 -0.00088501C12.5658 -0.00088501 12.6309 0.0120898 12.6916 0.0372962C12.7524 0.0625027 12.8075 0.0994455 12.854 0.146009L15.854 3.14601C15.9006 3.19245 15.9375 3.24763 15.9627 3.30838C15.9879 3.36912 16.0009 3.43424 16.0009 3.50001C16.0009 3.56578 15.9879 3.6309 15.9627 3.69164C15.9375 3.75239 15.9006 3.80756 15.854 3.85401L5.85399 13.854C5.806 13.9017 5.74885 13.9391 5.68599 13.964L0.685989 15.964C0.595125 16.0004 0.495585 16.0093 0.399709 15.9896C0.303832 15.9699 0.215836 15.9226 0.14663 15.8534C0.0774234 15.7842 0.0300499 15.6962 0.0103825 15.6003C-0.00928499 15.5044 -0.000381488 15.4049 0.0359892 15.314L2.03599 10.314C2.06092 10.2511 2.09834 10.194 2.14599 10.146L12.146 0.146009V0.146009ZM11.207 2.50001L13.5 4.79301L14.793 3.50001L12.5 1.20701L11.207 2.50001ZM12.793 5.50001L10.5 3.20701L3.99999 9.70701V10H4.49999C4.6326 10 4.75977 10.0527 4.85354 10.1465C4.94731 10.2402 4.99999 10.3674 4.99999 10.5V11H5.49999C5.6326 11 5.75977 11.0527 5.85354 11.1465C5.94731 11.2402 5.99999 11.3674 5.99999 11.5V12H6.29299L12.793 5.50001V5.50001ZM3.03199 10.675L2.92599 10.781L1.39799 14.602L5.21899 13.074L5.32499 12.968C5.22961 12.9324 5.14738 12.8685 5.0893 12.7848C5.03123 12.7012 5.00007 12.6018 4.99999 12.5V12H4.49999C4.36738 12 4.2402 11.9473 4.14644 11.8536C4.05267 11.7598 3.99999 11.6326 3.99999 11.5V11H3.49999C3.39817 10.9999 3.2988 10.9688 3.21517 10.9107C3.13153 10.8526 3.06763 10.7704 3.03199 10.675V10.675Z" fill="#212529"/>
</g>
<defs>
<clipPath id="clip0_4312_31862">
<rect width="16" height="16" fill="white"/>
</clipPath>
</defs>
</svg>

				&nbsp;<t9n>[RU]Переименовать таблицу[EN]Rename the table</t9n>
			</a>
		</li>
		<li class="change-base change-base-select" style="display:none">
			<select id="changeBase" class="form-control form-control-sm" onchange="changeBase(this)"></select>
		</li>
		<li class="change-base change-base-btn" onclick="$('.change-base').toggle()">
			<a href="#">
				<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_4312_31866)">
<path d="M0 0.5C0 0.367392 0.0526784 0.240215 0.146447 0.146447C0.240215 0.0526784 0.367392 0 0.5 0H5.5C5.63261 0 5.75979 0.0526784 5.85355 0.146447C5.94732 0.240215 6 0.367392 6 0.5V5.777L10.147 1.646C10.2408 1.55226 10.3679 1.49961 10.5005 1.49961C10.6331 1.49961 10.7602 1.55226 10.854 1.646L14.389 5.182C14.4356 5.22845 14.4725 5.28362 14.4977 5.34437C14.5229 5.40511 14.5359 5.47023 14.5359 5.536C14.5359 5.60177 14.5229 5.66689 14.4977 5.72763C14.4725 5.78838 14.4356 5.84355 14.389 5.89L10.261 10H15.5C15.6326 10 15.7598 10.0527 15.8536 10.1464C15.9473 10.2402 16 10.3674 16 10.5V15.5C16 15.6326 15.9473 15.7598 15.8536 15.8536C15.7598 15.9473 15.6326 16 15.5 16H3C2.60598 16.0005 2.21576 15.923 1.85177 15.7722C1.48777 15.6213 1.15718 15.4 0.879 15.121C0.326111 14.57 0.0106441 13.8245 0 13.044V0.5ZM6 12.834L13.328 5.534L10.499 2.706L6 7.188V12.835V12.834ZM4.5 13C4.5 12.6022 4.34196 12.2206 4.06066 11.9393C3.77936 11.658 3.39782 11.5 3 11.5C2.60218 11.5 2.22064 11.658 1.93934 11.9393C1.65804 12.2206 1.5 12.6022 1.5 13C1.5 13.3978 1.65804 13.7794 1.93934 14.0607C2.22064 14.342 2.60218 14.5 3 14.5C3.39782 14.5 3.77936 14.342 4.06066 14.0607C4.34196 13.7794 4.5 13.3978 4.5 13ZM15 15V11H9.258L5.243 15H15Z" fill="#212529"/>
<path d="M0 12.995V13C1.35722e-06 12.9983 1.35722e-06 12.9967 0 12.995Z" fill="#212529"/>
</g>
<defs>
<clipPath id="clip0_4312_31866">
<rect width="16" height="16" fill="white"/>
</clipPath>
</defs>
</svg>

				&nbsp;<t9n>[RU]Изменить тип[EN]Сhange type</t9n>
			</a>
		</li>
		<li>
			<label class="mb-0">
				<input type="checkbox" class="mt-1 unique" onchange="$('#{ID}').toggleClass('unique');types[{ID}].unique=!types[{ID}].unique;saveType({ID})">
				&nbsp; <a class="a"><t9n>[RU]Уникальные значения[EN]Unique values</t9n></a>
			</label>
		</li>
		<li id="delTable" onclick="checkDelTable()">
			<a href="#">
				<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M5.5 5.5C5.63261 5.5 5.75979 5.55268 5.85355 5.64645C5.94732 5.74021 6 5.86739 6 6V12C6 12.1326 5.94732 12.2598 5.85355 12.3536C5.75979 12.4473 5.63261 12.5 5.5 12.5C5.36739 12.5 5.24021 12.4473 5.14645 12.3536C5.05268 12.2598 5 12.1326 5 12V6C5 5.86739 5.05268 5.74021 5.14645 5.64645C5.24021 5.55268 5.36739 5.5 5.5 5.5ZM8 5.5C8.13261 5.5 8.25979 5.55268 8.35355 5.64645C8.44732 5.74021 8.5 5.86739 8.5 6V12C8.5 12.1326 8.44732 12.2598 8.35355 12.3536C8.25979 12.4473 8.13261 12.5 8 12.5C7.86739 12.5 7.74021 12.4473 7.64645 12.3536C7.55268 12.2598 7.5 12.1326 7.5 12V6C7.5 5.86739 7.55268 5.74021 7.64645 5.64645C7.74021 5.55268 7.86739 5.5 8 5.5ZM11 6C11 5.86739 10.9473 5.74021 10.8536 5.64645C10.7598 5.55268 10.6326 5.5 10.5 5.5C10.3674 5.5 10.2402 5.55268 10.1464 5.64645C10.0527 5.74021 10 5.86739 10 6V12C10 12.1326 10.0527 12.2598 10.1464 12.3536C10.2402 12.4473 10.3674 12.5 10.5 12.5C10.6326 12.5 10.7598 12.4473 10.8536 12.3536C10.9473 12.2598 11 12.1326 11 12V6Z" fill="#212529"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 3C14.5 3.26522 14.3946 3.51957 14.2071 3.70711C14.0196 3.89464 13.7652 4 13.5 4H13V13C13 13.5304 12.7893 14.0391 12.4142 14.4142C12.0391 14.7893 11.5304 15 11 15H5C4.46957 15 3.96086 14.7893 3.58579 14.4142C3.21071 14.0391 3 13.5304 3 13V4H2.5C2.23478 4 1.98043 3.89464 1.79289 3.70711C1.60536 3.51957 1.5 3.26522 1.5 3V2C1.5 1.73478 1.60536 1.48043 1.79289 1.29289C1.98043 1.10536 2.23478 1 2.5 1H6C6 0.734784 6.10536 0.48043 6.29289 0.292893C6.48043 0.105357 6.73478 0 7 0H9C9.26522 0 9.51957 0.105357 9.70711 0.292893C9.89464 0.48043 10 0.734784 10 1H13.5C13.7652 1 14.0196 1.10536 14.2071 1.29289C14.3946 1.48043 14.5 1.73478 14.5 2V3ZM4.118 4L4 4.059V13C4 13.2652 4.10536 13.5196 4.29289 13.7071C4.48043 13.8946 4.73478 14 5 14H11C11.2652 14 11.5196 13.8946 11.7071 13.7071C11.8946 13.5196 12 13.2652 12 13V4.059L11.882 4H4.118ZM2.5 3V2H13.5V3H2.5Z" fill="#212529"/>
</svg>

				&nbsp;<t9n>[RU]Удалить таблицу[EN]Delete the table</t9n>
			</a>
		</li>
	</ul>
</div>
<div class="edit-сolumn modal-form shadow hidden">
	<ul class="edit">
		<li class="move-left" onclick="intApi('POST','_d_up/'+colId(this)+'?JSON','reload')">
			<a href="#">
				<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M15 8.00002C15 7.86741 14.9473 7.74024 14.8536 7.64647C14.7598 7.5527 14.6326 7.50002 14.5 7.50002H2.70701L5.85401 4.35402C5.9005 4.30753 5.93737 4.25234 5.96253 4.1916C5.98769 4.13087 6.00064 4.06577 6.00064 4.00002C6.00064 3.93428 5.98769 3.86918 5.96253 3.80844C5.93737 3.7477 5.9005 3.69251 5.85401 3.64602C5.80752 3.59953 5.75233 3.56266 5.69159 3.5375C5.63085 3.51234 5.56575 3.49939 5.50001 3.49939C5.43426 3.49939 5.36916 3.51234 5.30842 3.5375C5.24769 3.56266 5.1925 3.59953 5.14601 3.64602L1.14601 7.64602C1.09945 7.69247 1.0625 7.74764 1.0373 7.80839C1.01209 7.86913 0.999115 7.93425 0.999115 8.00002C0.999115 8.06579 1.01209 8.13091 1.0373 8.19165C1.0625 8.2524 1.09945 8.30758 1.14601 8.35402L5.14601 12.354C5.1925 12.4005 5.24769 12.4374 5.30842 12.4625C5.36916 12.4877 5.43426 12.5007 5.50001 12.5007C5.56575 12.5007 5.63085 12.4877 5.69159 12.4625C5.75233 12.4374 5.80752 12.4005 5.85401 12.354C5.9005 12.3075 5.93737 12.2523 5.96253 12.1916C5.98769 12.1309 6.00064 12.0658 6.00064 12C6.00064 11.9343 5.98769 11.8692 5.96253 11.8084C5.93737 11.7477 5.9005 11.6925 5.85401 11.646L2.70701 8.50002H14.5C14.6326 8.50002 14.7598 8.44734 14.8536 8.35357C14.9473 8.25981 15 8.13263 15 8.00002Z" fill="#212529"/>
</svg>

				&nbsp;<t9n>[RU]Переместить левее[EN]Move left</t9n>
			</a>
		</li>
		<li class="change-val change-val-input" style="display:none">
			<input id="changeVal" class="form-control form-control-sm" onchange="renameColumn(this)">
		</li>
		<li class="change-val change-val-btn" onclick="$('.change-val').toggle()">
			<a href="#" class="t-req">
				<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_4312_31862)">
<path d="M12.146 0.146009C12.1924 0.0994455 12.2476 0.0625027 12.3084 0.0372962C12.3691 0.0120898 12.4342 -0.00088501 12.5 -0.00088501C12.5658 -0.00088501 12.6309 0.0120898 12.6916 0.0372962C12.7524 0.0625027 12.8075 0.0994455 12.854 0.146009L15.854 3.14601C15.9006 3.19245 15.9375 3.24763 15.9627 3.30838C15.9879 3.36912 16.0009 3.43424 16.0009 3.50001C16.0009 3.56578 15.9879 3.6309 15.9627 3.69164C15.9375 3.75239 15.9006 3.80756 15.854 3.85401L5.85399 13.854C5.806 13.9017 5.74885 13.9391 5.68599 13.964L0.685989 15.964C0.595125 16.0004 0.495585 16.0093 0.399709 15.9896C0.303832 15.9699 0.215836 15.9226 0.14663 15.8534C0.0774234 15.7842 0.0300499 15.6962 0.0103825 15.6003C-0.00928499 15.5044 -0.000381488 15.4049 0.0359892 15.314L2.03599 10.314C2.06092 10.2511 2.09834 10.194 2.14599 10.146L12.146 0.146009V0.146009ZM11.207 2.50001L13.5 4.79301L14.793 3.50001L12.5 1.20701L11.207 2.50001ZM12.793 5.50001L10.5 3.20701L3.99999 9.70701V10H4.49999C4.6326 10 4.75977 10.0527 4.85354 10.1465C4.94731 10.2402 4.99999 10.3674 4.99999 10.5V11H5.49999C5.6326 11 5.75977 11.0527 5.85354 11.1465C5.94731 11.2402 5.99999 11.3674 5.99999 11.5V12H6.29299L12.793 5.50001V5.50001ZM3.03199 10.675L2.92599 10.781L1.39799 14.602L5.21899 13.074L5.32499 12.968C5.22961 12.9324 5.14738 12.8685 5.0893 12.7848C5.03123 12.7012 5.00007 12.6018 4.99999 12.5V12H4.49999C4.36738 12 4.2402 11.9473 4.14644 11.8536C4.05267 11.7598 3.99999 11.6326 3.99999 11.5V11H3.49999C3.39817 10.9999 3.2988 10.9688 3.21517 10.9107C3.13153 10.8526 3.06763 10.7704 3.03199 10.675V10.675Z" fill="#212529"/>
</g>
<defs>
<clipPath id="clip0_4312_31862">
<rect width="16" height="16" fill="white"/>
</clipPath>
</defs>
</svg>

				&nbsp;<t9n>[RU]Переименовать колонку[EN]Rename the column</t9n>
			</a>
		</li>
		<li class="change-base change-base-select" style="display:none">
			<select id="changeBase" class="form-control form-control-sm" onchange="$('#'+colId(this)).attr('base',types[origId(this)].base=this.value);saveType(origId(this))"></select>
		</li>
		<li class="change-base change-base-btn t-req" onclick="$('.change-base').toggle()">
			<a href="#">
				<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_4312_31866)">
<path d="M0 0.5C0 0.367392 0.0526784 0.240215 0.146447 0.146447C0.240215 0.0526784 0.367392 0 0.5 0H5.5C5.63261 0 5.75979 0.0526784 5.85355 0.146447C5.94732 0.240215 6 0.367392 6 0.5V5.777L10.147 1.646C10.2408 1.55226 10.3679 1.49961 10.5005 1.49961C10.6331 1.49961 10.7602 1.55226 10.854 1.646L14.389 5.182C14.4356 5.22845 14.4725 5.28362 14.4977 5.34437C14.5229 5.40511 14.5359 5.47023 14.5359 5.536C14.5359 5.60177 14.5229 5.66689 14.4977 5.72763C14.4725 5.78838 14.4356 5.84355 14.389 5.89L10.261 10H15.5C15.6326 10 15.7598 10.0527 15.8536 10.1464C15.9473 10.2402 16 10.3674 16 10.5V15.5C16 15.6326 15.9473 15.7598 15.8536 15.8536C15.7598 15.9473 15.6326 16 15.5 16H3C2.60598 16.0005 2.21576 15.923 1.85177 15.7722C1.48777 15.6213 1.15718 15.4 0.879 15.121C0.326111 14.57 0.0106441 13.8245 0 13.044V0.5ZM6 12.834L13.328 5.534L10.499 2.706L6 7.188V12.835V12.834ZM4.5 13C4.5 12.6022 4.34196 12.2206 4.06066 11.9393C3.77936 11.658 3.39782 11.5 3 11.5C2.60218 11.5 2.22064 11.658 1.93934 11.9393C1.65804 12.2206 1.5 12.6022 1.5 13C1.5 13.3978 1.65804 13.7794 1.93934 14.0607C2.22064 14.342 2.60218 14.5 3 14.5C3.39782 14.5 3.77936 14.342 4.06066 14.0607C4.34196 13.7794 4.5 13.3978 4.5 13ZM15 15V11H9.258L5.243 15H15Z" fill="#212529"/>
<path d="M0 12.995V13C1.35722e-06 12.9983 1.35722e-06 12.9967 0 12.995Z" fill="#212529"/>
</g>
<defs>
<clipPath id="clip0_4312_31866">
<rect width="16" height="16" fill="white"/>
</clipPath>
</defs>
</svg>

				&nbsp;<t9n>[RU]Изменить тип[EN]Сhange type</t9n>
			</a>
		</li>
		<li>
			<label class="mb-0">
				<input type="checkbox" class="mt-1 mandatory" onchange="$('#'+colId(this)).toggleClass('mandatory');intApi('POST','_d_null/'+colId(this)+'?JSON','')">
				&nbsp; <a class="a"><t9n>[RU]Обязательно к заполнению[EN]Make mandatory</t9n></a>
			</label>
		</li>
		<!--
		<li>
			<a href="#">
			   <svg width="22" height="22" viewBox="2 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path d="M7.85714 10.2143L10.2143 12.5714L18.0714 4.7143M17.2857 11V16.5C17.2857 16.9168 17.1201 17.3165 16.8254 17.6112C16.5307 17.9059 16.1311 18.0714 15.7143 18.0714H4.71428C4.29751 18.0714 3.89781 17.9059 3.60311 17.6112C3.30841 17.3165 3.14285 16.9168 3.14285 16.5V5.50002C3.14285 5.08325 3.30841 4.68355 3.60311 4.38885C3.89781 4.09415 4.29751 3.92859 4.71428 3.92859H13.3571" stroke="#1A1A1A" stroke-linecap="round" stroke-linejoin="round"/>
				</svg>
				&nbsp;<t9n>[RU]Значение по умолчанию [EN]Set default value</t9n>
			</a>
		</li>
		-->
		<li class="t-req make-table" onclick="makeTable(colId(this),origId(this))">
			<a href="#">
				<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M4.99999 11.5C4.99999 11.3674 5.05267 11.2402 5.14644 11.1464C5.24021 11.0527 5.36739 11 5.49999 11H14.5C14.6326 11 14.7598 11.0527 14.8535 11.1464C14.9473 11.2402 15 11.3674 15 11.5C15 11.6326 14.9473 11.7598 14.8535 11.8536C14.7598 11.9473 14.6326 12 14.5 12H5.49999C5.36739 12 5.24021 11.9473 5.14644 11.8536C5.05267 11.7598 4.99999 11.6326 4.99999 11.5ZM4.99999 7.5C4.99999 7.36739 5.05267 7.24022 5.14644 7.14645C5.24021 7.05268 5.36739 7 5.49999 7H14.5C14.6326 7 14.7598 7.05268 14.8535 7.14645C14.9473 7.24022 15 7.36739 15 7.5C15 7.63261 14.9473 7.75979 14.8535 7.85356C14.7598 7.94732 14.6326 8 14.5 8H5.49999C5.36739 8 5.24021 7.94732 5.14644 7.85356C5.05267 7.75979 4.99999 7.63261 4.99999 7.5ZM4.99999 3.5C4.99999 3.36739 5.05267 3.24022 5.14644 3.14645C5.24021 3.05268 5.36739 3 5.49999 3H14.5C14.6326 3 14.7598 3.05268 14.8535 3.14645C14.9473 3.24022 15 3.36739 15 3.5C15 3.63261 14.9473 3.75979 14.8535 3.85356C14.7598 3.94732 14.6326 4 14.5 4H5.49999C5.36739 4 5.24021 3.94732 5.14644 3.85356C5.05267 3.75979 4.99999 3.63261 4.99999 3.5Z" fill="#212529"/>
<path d="M2.24199 2.194C2.25901 2.13886 2.29324 2.09062 2.33967 2.05635C2.3861 2.02209 2.44229 2.0036 2.49999 2.0036C2.5577 2.0036 2.61389 2.02209 2.66032 2.05635C2.70675 2.09062 2.74098 2.13886 2.75799 2.194L2.91999 2.724C2.95499 2.839 3.05999 2.918 3.17799 2.918H3.72899C3.98799 2.918 4.09899 3.251 3.89299 3.411L3.42499 3.774C3.38077 3.80859 3.3481 3.8558 3.33131 3.90937C3.31452 3.96295 3.31441 4.02036 3.33099 4.074L3.50399 4.643C3.58199 4.899 3.29099 5.105 3.08099 4.943L2.66399 4.619C2.61711 4.58251 2.5594 4.5627 2.49999 4.5627C2.44059 4.5627 2.38287 4.58251 2.33599 4.619L1.91899 4.942C1.70899 5.105 1.41899 4.899 1.49599 4.643L1.66899 4.073C1.68535 4.0195 1.68513 3.9623 1.66835 3.90893C1.65157 3.85556 1.61902 3.80852 1.57499 3.774L1.10699 3.411C0.900994 3.251 1.01199 2.918 1.27099 2.918H1.82099C1.87929 2.91782 1.93597 2.89885 1.98263 2.8639C2.02929 2.82896 2.06343 2.77989 2.07999 2.724L2.24199 2.194ZM2.24199 6.194C2.25901 6.13886 2.29324 6.09062 2.33967 6.05636C2.3861 6.02209 2.44229 6.0036 2.49999 6.0036C2.5577 6.0036 2.61389 6.02209 2.66032 6.05636C2.70675 6.09062 2.74098 6.13886 2.75799 6.194L2.91999 6.724C2.95499 6.839 3.05999 6.918 3.17799 6.918H3.72899C3.98799 6.918 4.09899 7.251 3.89299 7.411L3.42499 7.774C3.38077 7.80859 3.3481 7.8558 3.33131 7.90938C3.31452 7.96295 3.31441 8.02036 3.33099 8.074L3.50399 8.643C3.58199 8.898 3.29099 9.105 3.08099 8.943L2.66399 8.619C2.61711 8.58251 2.5594 8.5627 2.49999 8.5627C2.44059 8.5627 2.38287 8.58251 2.33599 8.619L1.91899 8.942C1.70899 9.105 1.41899 8.899 1.49599 8.643L1.66899 8.073C1.68535 8.0195 1.68513 7.9623 1.66835 7.90893C1.65157 7.85556 1.61902 7.80852 1.57499 7.774L1.10699 7.411C0.900994 7.251 1.01199 6.918 1.27099 6.918H1.82099C1.87929 6.91782 1.93597 6.89885 1.98263 6.8639C2.02929 6.82896 2.06343 6.77989 2.07999 6.724L2.24199 6.194ZM2.24199 10.194C2.25901 10.1389 2.29324 10.0906 2.33967 10.0564C2.3861 10.0221 2.44229 10.0036 2.49999 10.0036C2.5577 10.0036 2.61389 10.0221 2.66032 10.0564C2.70675 10.0906 2.74098 10.1389 2.75799 10.194L2.91999 10.724C2.95499 10.839 3.05999 10.918 3.17799 10.918H3.72899C3.98799 10.918 4.09899 11.251 3.89299 11.411L3.42499 11.774C3.38077 11.8086 3.3481 11.8558 3.33131 11.9094C3.31452 11.9629 3.31441 12.0204 3.33099 12.074L3.50399 12.643C3.58199 12.898 3.29099 13.105 3.08099 12.943L2.66399 12.619C2.61711 12.5825 2.5594 12.5627 2.49999 12.5627C2.44059 12.5627 2.38287 12.5825 2.33599 12.619L1.91899 12.942C1.70899 13.105 1.41899 12.899 1.49599 12.643L1.66899 12.073C1.68535 12.0195 1.68513 11.9623 1.66835 11.9089C1.65157 11.8556 1.61902 11.8085 1.57499 11.774L1.10699 11.411C0.900994 11.251 1.01199 10.918 1.27099 10.918H1.82099C1.87929 10.9178 1.93597 10.8989 1.98263 10.8639C2.02929 10.829 2.06343 10.7799 2.07999 10.724L2.24199 10.194Z" fill="#212529"/>
</svg>

				&nbsp;<t9n>[RU]Сделать таблицей[EN]Turn into table</t9n>
			</a>
		</li>
		<li class="go-table" style="display:none" onclick="location.href=$(this).find('a').attr('href')">
			<a href="#">
				<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_4312_31868)">
<path d="M0 2C0 1.46957 0.210714 0.960859 0.585786 0.585786C0.960859 0.210714 1.46957 0 2 0L14 0C14.5304 0 15.0391 0.210714 15.4142 0.585786C15.7893 0.960859 16 1.46957 16 2V14C16 14.5304 15.7893 15.0391 15.4142 15.4142C15.0391 15.7893 14.5304 16 14 16H2C1.46957 16 0.960859 15.7893 0.585786 15.4142C0.210714 15.0391 0 14.5304 0 14V2ZM15 4H11V7H15V4ZM15 8H11V11H15V8ZM15 12H11V15H14C14.2652 15 14.5196 14.8946 14.7071 14.7071C14.8946 14.5196 15 14.2652 15 14V12ZM10 15V12H6V15H10ZM5 15V12H1V14C1 14.2652 1.10536 14.5196 1.29289 14.7071C1.48043 14.8946 1.73478 15 2 15H5ZM1 11H5V8H1V11ZM1 7H5V4H1V7ZM6 4V7H10V4H6ZM10 8H6V11H10V8Z" fill="#212529"/>
</g>
<defs>
<clipPath id="clip0_4312_31868">
<rect width="16" height="16" fill="white"/>
</clipPath>
</defs>
</svg>

				&nbsp;<t9n>[RU]Перейти к таблице[EN]Go to table</t9n>
			</a>
		</li>
		<li onclick="location.href=$(this).find('a').attr('href')">
			<a href="#" class="t-ref go-dict">
				<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M6 3.5C6 3.36739 6.05268 3.24021 6.14645 3.14645C6.24021 3.05268 6.36739 3 6.5 3H14.5C14.6326 3 14.7598 3.05268 14.8536 3.14645C14.9473 3.24021 15 3.36739 15 3.5V12.5C15 12.6326 14.9473 12.7598 14.8536 12.8536C14.7598 12.9473 14.6326 13 14.5 13H6.5C6.36739 13 6.24021 12.9473 6.14645 12.8536C6.05268 12.7598 6 12.6326 6 12.5V10.5C6 10.3674 5.94732 10.2402 5.85355 10.1464C5.75979 10.0527 5.63261 10 5.5 10C5.36739 10 5.24021 10.0527 5.14645 10.1464C5.05268 10.2402 5 10.3674 5 10.5V12.5C5 12.8978 5.15804 13.2794 5.43934 13.5607C5.72064 13.842 6.10218 14 6.5 14H14.5C14.8978 14 15.2794 13.842 15.5607 13.5607C15.842 13.2794 16 12.8978 16 12.5V3.5C16 3.10218 15.842 2.72064 15.5607 2.43934C15.2794 2.15804 14.8978 2 14.5 2H6.5C6.10218 2 5.72064 2.15804 5.43934 2.43934C5.15804 2.72064 5 3.10218 5 3.5V5.5C5 5.63261 5.05268 5.75979 5.14645 5.85355C5.24021 5.94732 5.36739 6 5.5 6C5.63261 6 5.75979 5.94732 5.85355 5.85355C5.94732 5.75979 6 5.63261 6 5.5V3.5Z" fill="#212529"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M11.854 8.354C11.9006 8.30755 11.9375 8.25238 11.9627 8.19163C11.9879 8.13089 12.0009 8.06577 12.0009 8C12.0009 7.93423 11.9879 7.86911 11.9627 7.80837C11.9375 7.74762 11.9006 7.69245 11.854 7.646L8.854 4.646C8.80751 4.59951 8.75232 4.56264 8.69158 4.53748C8.63084 4.51232 8.56574 4.49937 8.5 4.49937C8.43426 4.49937 8.36916 4.51232 8.30842 4.53748C8.24768 4.56264 8.19249 4.59951 8.146 4.646C8.09951 4.69249 8.06264 4.74768 8.03748 4.80842C8.01232 4.86916 7.99937 4.93426 7.99937 5C7.99937 5.06574 8.01232 5.13084 8.03748 5.19158C8.06264 5.25232 8.09951 5.30751 8.146 5.354L10.293 7.5H1.5C1.36739 7.5 1.24021 7.55268 1.14645 7.64645C1.05268 7.74021 1 7.86739 1 8C1 8.13261 1.05268 8.25979 1.14645 8.35355C1.24021 8.44732 1.36739 8.5 1.5 8.5H10.293L8.146 10.646C8.09951 10.6925 8.06264 10.7477 8.03748 10.8084C8.01232 10.8692 7.99937 10.9343 7.99937 11C7.99937 11.0657 8.01232 11.1308 8.03748 11.1916C8.06264 11.2523 8.09951 11.3075 8.146 11.354C8.19249 11.4005 8.24768 11.4374 8.30842 11.4625C8.36916 11.4877 8.43426 11.5006 8.5 11.5006C8.56574 11.5006 8.63084 11.4877 8.69158 11.4625C8.75232 11.4374 8.80751 11.4005 8.854 11.354L11.854 8.354Z" fill="#212529"/>
</svg>

				&nbsp;<t9n>[RU]Перейти в справочник[EN]Enter the dicrionary</t9n>
			</a>
		</li>
		<li class="change-alias change-alias-input" style="display:none">
			<input id="changeAlias" class="form-control form-control-sm" onchange="setAlias(this)">
		</li>
		<li class="change-alias change-alias-btn" onclick="$('.change-alias').toggle()">
			<a href="#" class="t-ref">
				<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6 4.5C6 4.89782 5.84196 5.27936 5.56066 5.56066C5.27936 5.84196 4.89782 6 4.5 6C4.10218 6 3.72064 5.84196 3.43934 5.56066C3.15804 5.27936 3 4.89782 3 4.5C3 4.10218 3.15804 3.72064 3.43934 3.43934C3.72064 3.15804 4.10218 3 4.5 3C4.89782 3 5.27936 3.15804 5.56066 3.43934C5.84196 3.72064 6 4.10218 6 4.5ZM5 4.5C5 4.36739 4.94732 4.24021 4.85355 4.14645C4.75979 4.05268 4.63261 4 4.5 4C4.36739 4 4.24021 4.05268 4.14645 4.14645C4.05268 4.24021 4 4.36739 4 4.5C4 4.63261 4.05268 4.75979 4.14645 4.85355C4.24021 4.94732 4.36739 5 4.5 5C4.63261 5 4.75979 4.94732 4.85355 4.85355C4.94732 4.75979 5 4.63261 5 4.5Z" fill="#212529"/>
<path d="M2 1H6.586C6.85119 1.00006 7.10551 1.10545 7.293 1.293L14.293 8.293C14.4805 8.48053 14.5858 8.73484 14.5858 9C14.5858 9.26516 14.4805 9.51947 14.293 9.707L9.707 14.293C9.51947 14.4805 9.26516 14.5858 9 14.5858C8.73484 14.5858 8.48053 14.4805 8.293 14.293L1.293 7.293C1.10545 7.10551 1.00006 6.85119 1 6.586V2C1 1.73478 1.10536 1.48043 1.29289 1.29289C1.48043 1.10536 1.73478 1 2 1ZM2 6.586L9 13.586L13.586 9L6.586 2H2V6.586Z" fill="#212529"/>
</svg>

				&nbsp;<t9n>[RU]Задать псевдоним[EN]Set an alias</t9n>
			</a>
		</li>
		<li onclick="intApi('POST','_d_multi/'+colId(this)+'?JSON','multi')">
			<a class="t-one">
				<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M4.99999 11.5C4.99999 11.3674 5.05267 11.2402 5.14644 11.1464C5.24021 11.0527 5.36739 11 5.49999 11H14.5C14.6326 11 14.7598 11.0527 14.8535 11.1464C14.9473 11.2402 15 11.3674 15 11.5C15 11.6326 14.9473 11.7598 14.8535 11.8536C14.7598 11.9473 14.6326 12 14.5 12H5.49999C5.36739 12 5.24021 11.9473 5.14644 11.8536C5.05267 11.7598 4.99999 11.6326 4.99999 11.5ZM4.99999 7.5C4.99999 7.36739 5.05267 7.24022 5.14644 7.14645C5.24021 7.05268 5.36739 7 5.49999 7H14.5C14.6326 7 14.7598 7.05268 14.8535 7.14645C14.9473 7.24022 15 7.36739 15 7.5C15 7.63261 14.9473 7.75979 14.8535 7.85356C14.7598 7.94732 14.6326 8 14.5 8H5.49999C5.36739 8 5.24021 7.94732 5.14644 7.85356C5.05267 7.75979 4.99999 7.63261 4.99999 7.5ZM4.99999 3.5C4.99999 3.36739 5.05267 3.24022 5.14644 3.14645C5.24021 3.05268 5.36739 3 5.49999 3H14.5C14.6326 3 14.7598 3.05268 14.8535 3.14645C14.9473 3.24022 15 3.36739 15 3.5C15 3.63261 14.9473 3.75979 14.8535 3.85356C14.7598 3.94732 14.6326 4 14.5 4H5.49999C5.36739 4 5.24021 3.94732 5.14644 3.85356C5.05267 3.75979 4.99999 3.63261 4.99999 3.5Z" fill="#212529"/>
<path d="M2.24199 2.194C2.25901 2.13886 2.29324 2.09062 2.33967 2.05635C2.3861 2.02209 2.44229 2.0036 2.49999 2.0036C2.5577 2.0036 2.61389 2.02209 2.66032 2.05635C2.70675 2.09062 2.74098 2.13886 2.75799 2.194L2.91999 2.724C2.95499 2.839 3.05999 2.918 3.17799 2.918H3.72899C3.98799 2.918 4.09899 3.251 3.89299 3.411L3.42499 3.774C3.38077 3.80859 3.3481 3.8558 3.33131 3.90937C3.31452 3.96295 3.31441 4.02036 3.33099 4.074L3.50399 4.643C3.58199 4.899 3.29099 5.105 3.08099 4.943L2.66399 4.619C2.61711 4.58251 2.5594 4.5627 2.49999 4.5627C2.44059 4.5627 2.38287 4.58251 2.33599 4.619L1.91899 4.942C1.70899 5.105 1.41899 4.899 1.49599 4.643L1.66899 4.073C1.68535 4.0195 1.68513 3.9623 1.66835 3.90893C1.65157 3.85556 1.61902 3.80852 1.57499 3.774L1.10699 3.411C0.900994 3.251 1.01199 2.918 1.27099 2.918H1.82099C1.87929 2.91782 1.93597 2.89885 1.98263 2.8639C2.02929 2.82896 2.06343 2.77989 2.07999 2.724L2.24199 2.194ZM2.24199 6.194C2.25901 6.13886 2.29324 6.09062 2.33967 6.05636C2.3861 6.02209 2.44229 6.0036 2.49999 6.0036C2.5577 6.0036 2.61389 6.02209 2.66032 6.05636C2.70675 6.09062 2.74098 6.13886 2.75799 6.194L2.91999 6.724C2.95499 6.839 3.05999 6.918 3.17799 6.918H3.72899C3.98799 6.918 4.09899 7.251 3.89299 7.411L3.42499 7.774C3.38077 7.80859 3.3481 7.8558 3.33131 7.90938C3.31452 7.96295 3.31441 8.02036 3.33099 8.074L3.50399 8.643C3.58199 8.898 3.29099 9.105 3.08099 8.943L2.66399 8.619C2.61711 8.58251 2.5594 8.5627 2.49999 8.5627C2.44059 8.5627 2.38287 8.58251 2.33599 8.619L1.91899 8.942C1.70899 9.105 1.41899 8.899 1.49599 8.643L1.66899 8.073C1.68535 8.0195 1.68513 7.9623 1.66835 7.90893C1.65157 7.85556 1.61902 7.80852 1.57499 7.774L1.10699 7.411C0.900994 7.251 1.01199 6.918 1.27099 6.918H1.82099C1.87929 6.91782 1.93597 6.89885 1.98263 6.8639C2.02929 6.82896 2.06343 6.77989 2.07999 6.724L2.24199 6.194ZM2.24199 10.194C2.25901 10.1389 2.29324 10.0906 2.33967 10.0564C2.3861 10.0221 2.44229 10.0036 2.49999 10.0036C2.5577 10.0036 2.61389 10.0221 2.66032 10.0564C2.70675 10.0906 2.74098 10.1389 2.75799 10.194L2.91999 10.724C2.95499 10.839 3.05999 10.918 3.17799 10.918H3.72899C3.98799 10.918 4.09899 11.251 3.89299 11.411L3.42499 11.774C3.38077 11.8086 3.3481 11.8558 3.33131 11.9094C3.31452 11.9629 3.31441 12.0204 3.33099 12.074L3.50399 12.643C3.58199 12.898 3.29099 13.105 3.08099 12.943L2.66399 12.619C2.61711 12.5825 2.5594 12.5627 2.49999 12.5627C2.44059 12.5627 2.38287 12.5825 2.33599 12.619L1.91899 12.942C1.70899 13.105 1.41899 12.899 1.49599 12.643L1.66899 12.073C1.68535 12.0195 1.68513 11.9623 1.66835 11.9089C1.65157 11.8556 1.61902 11.8085 1.57499 11.774L1.10699 11.411C0.900994 11.251 1.01199 10.918 1.27099 10.918H1.82099C1.87929 10.9178 1.93597 10.8989 1.98263 10.8639C2.02929 10.829 2.06343 10.7799 2.07999 10.724L2.24199 10.194Z" fill="#212529"/>
</svg>

				&nbsp;<t9n>[RU]Выбор нескольких значений[EN]Enable multi-select</t9n>
			</a>
		</li>
		<li onclick="intApi('POST','_d_multi/'+colId(this)+'?JSON','multi')">
			<a class="t-multi">
				<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4.71499 6.54199L3.34299 7.91399C2.78033 8.47665 2.46423 9.23978 2.46423 10.0355C2.46423 10.8312 2.78033 11.5943 3.34299 12.157C3.90564 12.7197 4.66877 13.0357 5.46449 13.0357C6.2602 13.0357 7.02333 12.7197 7.58599 12.157L9.41399 10.328C9.75328 9.98865 10.0062 9.57287 10.1516 9.11554C10.2969 8.65822 10.3305 8.17269 10.2493 7.69973C10.1682 7.22677 9.97485 6.78016 9.68542 6.3974C9.39599 6.01464 9.01896 5.70689 8.58599 5.49999L7.99999 6.08599C7.9405 6.14559 7.88875 6.21245 7.84599 6.28499C8.18051 6.38116 8.48415 6.56297 8.72688 6.81245C8.96961 7.06193 9.14303 7.37044 9.22999 7.70748C9.31695 8.04451 9.31444 8.39841 9.22272 8.73418C9.13099 9.06996 8.95323 9.37598 8.70699 9.62199L6.87999 11.45C6.50471 11.8253 5.99572 12.0361 5.46499 12.0361C4.93426 12.0361 4.42527 11.8253 4.04999 11.45C3.67471 11.0747 3.46388 10.5657 3.46388 10.035C3.46388 9.50427 3.67471 8.99528 4.04999 8.61999L4.84299 7.82799C4.7311 7.40872 4.68788 6.97509 4.71499 6.54199Z" fill="#212529"/>
<path d="M6.58599 4.67199C6.24669 5.01134 5.99375 5.42712 5.8484 5.88445C5.70304 6.34177 5.66951 6.8273 5.75063 7.30026C5.83174 7.77322 6.02513 8.21983 6.31456 8.60259C6.60399 8.98535 6.98101 9.2931 7.41399 9.49999L8.18899 8.72399C7.84994 8.63305 7.54079 8.45447 7.29262 8.2062C7.04445 7.95792 6.866 7.64871 6.7752 7.30962C6.6844 6.97053 6.68444 6.61351 6.77533 6.27444C6.86622 5.93537 7.04475 5.6262 7.29299 5.37799L9.11999 3.54999C9.49527 3.17471 10.0043 2.96388 10.535 2.96388C11.0657 2.96388 11.5747 3.17471 11.95 3.54999C12.3253 3.92528 12.5361 4.43427 12.5361 4.96499C12.5361 5.49572 12.3253 6.00471 11.95 6.37999L11.157 7.17199C11.269 7.59199 11.312 8.02699 11.285 8.45899L12.657 7.08699C13.2196 6.52434 13.5357 5.76121 13.5357 4.96549C13.5357 4.16978 13.2196 3.40665 12.657 2.84399C12.0943 2.28134 11.3312 1.96524 10.5355 1.96524C9.73977 1.96524 8.97664 2.28134 8.41399 2.84399L6.58599 4.67199Z" fill="#212529"/>
</svg>

				&nbsp;<t9n>[RU]Отключить выбор нескольких[EN]Disable multiple select</t9n>
			</a>
		</li>
		<li onclick="intApi('POST','_d_del_req/'+colId(this)+'?JSON','reload')">
			<a href="#">
				<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M5.5 5.5C5.63261 5.5 5.75979 5.55268 5.85355 5.64645C5.94732 5.74021 6 5.86739 6 6V12C6 12.1326 5.94732 12.2598 5.85355 12.3536C5.75979 12.4473 5.63261 12.5 5.5 12.5C5.36739 12.5 5.24021 12.4473 5.14645 12.3536C5.05268 12.2598 5 12.1326 5 12V6C5 5.86739 5.05268 5.74021 5.14645 5.64645C5.24021 5.55268 5.36739 5.5 5.5 5.5ZM8 5.5C8.13261 5.5 8.25979 5.55268 8.35355 5.64645C8.44732 5.74021 8.5 5.86739 8.5 6V12C8.5 12.1326 8.44732 12.2598 8.35355 12.3536C8.25979 12.4473 8.13261 12.5 8 12.5C7.86739 12.5 7.74021 12.4473 7.64645 12.3536C7.55268 12.2598 7.5 12.1326 7.5 12V6C7.5 5.86739 7.55268 5.74021 7.64645 5.64645C7.74021 5.55268 7.86739 5.5 8 5.5ZM11 6C11 5.86739 10.9473 5.74021 10.8536 5.64645C10.7598 5.55268 10.6326 5.5 10.5 5.5C10.3674 5.5 10.2402 5.55268 10.1464 5.64645C10.0527 5.74021 10 5.86739 10 6V12C10 12.1326 10.0527 12.2598 10.1464 12.3536C10.2402 12.4473 10.3674 12.5 10.5 12.5C10.6326 12.5 10.7598 12.4473 10.8536 12.3536C10.9473 12.2598 11 12.1326 11 12V6Z" fill="#212529"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 3C14.5 3.26522 14.3946 3.51957 14.2071 3.70711C14.0196 3.89464 13.7652 4 13.5 4H13V13C13 13.5304 12.7893 14.0391 12.4142 14.4142C12.0391 14.7893 11.5304 15 11 15H5C4.46957 15 3.96086 14.7893 3.58579 14.4142C3.21071 14.0391 3 13.5304 3 13V4H2.5C2.23478 4 1.98043 3.89464 1.79289 3.70711C1.60536 3.51957 1.5 3.26522 1.5 3V2C1.5 1.73478 1.60536 1.48043 1.79289 1.29289C1.98043 1.10536 2.23478 1 2.5 1H6C6 0.734784 6.10536 0.48043 6.29289 0.292893C6.48043 0.105357 6.73478 0 7 0H9C9.26522 0 9.51957 0.105357 9.70711 0.292893C9.89464 0.48043 10 0.734784 10 1H13.5C13.7652 1 14.0196 1.10536 14.2071 1.29289C14.3946 1.48043 14.5 1.73478 14.5 2V3ZM4.118 4L4 4.059V13C4 13.2652 4.10536 13.5196 4.29289 13.7071C4.48043 13.8946 4.73478 14 5 14H11C11.2652 14 11.5196 13.8946 11.7071 13.7071C11.8946 13.5196 12 13.2652 12 13V4.059L11.882 4H4.118ZM2.5 3V2H13.5V3H2.5Z" fill="#212529"/>
</svg>

				&nbsp;<t9n>[RU]Удалить колонку[EN]Delete the column</t9n>
			</a>
		</li>
	</ul>
</div>
<style>
    [data-trumb] {
      width: 50px;
      height: 100%;
      background-color: #c1c1c1;
      cursor: pointer;
      position: absolute;
    }

    [data-scroll] {
      width: 100%;
      right: 0;
      height: 15px;
      background-color: #f0f0f0;
      position: fixed;
      bottom: 21px;
      z-index: 10000;
    }

    #tableContainer {
      scrollbar-width: none;
      -ms-overflow-style: none;
      scrollbar-width: none;
      overflow: auto;
    }

    #tableContainer::-webkit-scrollbar {
      display: none;
    }
</style>
<script>
if(getCookie('tb_size'))
	$('#tb').css('font-size',getCookie('tb_size')+'px');
const defaultPageSize=20;
if($('.ending').length===0&&$('.no-pages').length===0&&$('.data-row').length>0){
    $('.p8n').html('<span class="ending">'+t9n('[RU]Всего [EN]Total ')+$('.data-row').length+'</span>');
	if($('.data-row').length>defaultPageSize)
		$('.p8n').append('. <a class="set-defailt-page-size" onclick="setLimit(defaultPageSize)">'+t9n('[RU]Показывать по [EN]Set page size to ')+defaultPageSize+'</a>.');
}
const sel2='<select multi=":multi:" class="form-control form-control-sm select2" i-orig=":ref-typ:"><option value=""></option></select>'
    ,sel2Opt='<option :selected: value=":id:" r=":r:">:val:</option>'
    ,msLink='<span id=":id:" ref=":ref:" class="badge badge-pill badge-secondary p-2 ml-0 mt-0 mb-1 mr-1"><a href="/{_global_.z}/object/:orig:/?F_I=:ref:" class="ms-link">:val:</a></span>'
    ,dropMS='<a class="ms-link drop-ms ml-1" onclick="newApi(\'POST\',\'_m_del/:id:?JSON\',\'dropMsDone\',\'\',:id:)">'
		     +'<svg width="12" height="12" viewBox="0 0 12 12" class="flex-none drop-svg ml-1">'
		     +'    <path fill-rule="evenodd" fill="currentColor" d="M7.41421356,6 L9.88226406,3.5319495 C10.0816659,3.33254771 10.0828664,3.01179862 9.88577489,2.81470708 L9.18529292,2.11422511 C8.97977275,1.90870494 8.66708101,1.91870543 8.4680505,2.11773594 L6,4.58578644 L3.5319495,2.11773594 C3.33254771,1.91833414 3.01179862,1.91713357 2.81470708,2.11422511 L2.11422511,2.81470708 C1.90870494,3.02022725 1.91870543,3.33291899 2.11773594,3.5319495 L4.58578644,6 L2.11773594,8.4680505 C1.91833414,8.66745229 1.91713357,8.98820138 2.11422511,9.18529292 L2.81470708,9.88577489 C3.02022725,10.0912951 3.33291899,10.0812946 3.5319495,9.88226406 L6,7.41421356 L8.4680505,9.88226406 C8.66745229,10.0816659 8.98820138,10.0828664 9.18529292,9.88577489 L9.88577489,9.18529292 C10.0912951,8.97977275 10.0812946,8.66708101 9.88226406,8.4680505 L7.41421356,6 L7.41421356,6 Z"></path>'
	       +'</svg>'
	       +'</a></span>'
	,delFile='<a class="mr-3" onclick="deleteFile(this)"><svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">'
                +'<path d="M5 8H23M10 8V6C10 5.46957 10.2107 4.96086 10.5858 4.58579C10.9609 4.21071 11.4696 4 12 4H16C16.5304 4 17.0391 4.21071 17.4142 4.58579C17.7893 4.96086 18 5.46957 18 6V8M21 8V22C21 22.5304 20.7893 23.0391 20.4142 23.4142C20.0391 23.7893 19.5304 24 19 24H9C8.46957 24 7.96086 23.7893 7.58579 23.4142C7.21071 23.0391 7 22.5304 7 22V8H21Z" stroke="#1A1A1A" stroke-linecap="round" stroke-linejoin="round">'
                +'</path></svg></a>'
    ,addTermTemplate=$('select[id=t'+id+']').length>0?$('select[id=t'+id+']')[0].outerHTML:undefined;
function setLimit(v){
	if(parseInt(v)>4){
		if(parseInt(v)>1000)
			v=1000;
		document.cookie='default_limit='+parseInt(v)+'; path=/{_global_.z}/object/{ID}; max-age=31622400';
		sendForm();
	}
	else
		$('#default_limit').val(defaultPageSize);
}
function recalculateTable(){
	let options = {
		'scrollBar': true,
		'shadow': true,
		'fixedNavbar': '.controls'
	}
	$(function() {
		$('#tableContainer').freezeTable(options);
	});
}
function setEditInlineAll(v){
    if(v==='0'){
    	document.cookie='edit-inline-all=1; path=/{_global_.z}; max-age=0';
        $('#allowInline').removeClass('button-on');
    }
    else{
    	document.cookie='edit-inline-all=1; path=/{_global_.z}; max-age=31622400';
        $('#allowInline').addClass('button-on');
    }
}
function editInline(){
    if(getCookie('edit-inline'))
    	document.cookie='edit-inline=1; path=/{_global_.z}/object/{ID}; max-age=0';
    else
    	document.cookie='edit-inline=1; path=/{_global_.z}/object/{ID}; max-age=31622400';
    $('#allowInline').toggleClass('button-on');
}
function tbCompact(mode){
	if(mode){
		$('#resize,#collapse,#fixed,#ultra').hide();
		switch(mode){
			case '1':
				$('#collapse').show();
				$('#tb').removeClass('table-sm');
				$('.data-row td,th').removeClass('fixed-tr').removeClass('fixed-td');
				document.cookie='table-sm=1; path=/{_global_.z}/object/{ID}; max-age=0';
				break;
			case '2':
				$('#fixed').show();
				$('#tb').addClass('table-sm');
				document.cookie='table-sm=2; path=/{_global_.z}/object/{ID}; max-age=31622400';
				break;
			case '3':
				$('#tb').addClass('table-sm');
				$('.data-row td,th').addClass('fixed-tr');
				$('#ultra').show();
				document.cookie='table-sm=3; path=/{_global_.z}/object/{ID}; max-age=31622400';
				break;
			case '4':
				$('#resize').show();
				$('.data-row td,th').removeClass('fixed-tr').addClass('fixed-td');
				$('#tb').addClass('table-sm');
				document.cookie='table-sm=4; path=/{_global_.z}/object/{ID}; max-age=31622400';
				break;
		}
		recalculateTable();
	}
}
tbCompact(getCookie('table-sm'));
var msColors=['78AAD2','78AAFF','78D2AA','78D2FF','78FFAA','78FFD2','AA78D2','AA78FF','AAD278','AAD2FF','AAFF78','AAFFD2','D278AA','D278FF','D2AA78','D2AAFF','D2FF78','D2FFAA','FF78AA','FF78D2','FFAA78','FFAAD2','FFD278','FFD2AA'];
$('.badge').each(function(){$(this).css('background-color','#'+msColors[$(this).attr('ref')%24])});
function changeBase(el){
	if(el.value.length>0){
		$('#{ID}').attr('base',types[{ID}].base=el.value);saveType({ID});
	}else{
		$(el).val(types[{ID}].base);
	}
}
function renameColumn(el){
	if(el.value.length>0)
		types[origId(el)].val=el.value;
	$('#'+colId(el)+' a[colid]').html(types[origId(el)].val);
	saveType(origId(el));
}
function renameTable(el){
	if(el.value.length>0)
		types[id].val=el.value;
	$('#'+id+' a[colid]').html(types[id].val);
	saveType(id);
}
function setAlias(el){
	if(el.value.length>0)
		$('#'+colId(el)+' a[colid]').html(el.value);
	else
		$('#'+colId(el)+' a[colid]').html(getOrig(colId(el)));
	var fd = new FormData();
	fd.append('val',el.value);
	intApi('POST','_d_alias/'+colId(el)+'?JSON','',fd);
}
function getOrig(id){
	for(var i in reqs)
		if(i==id)
			return types[reqs[i].orig].val;
}
function saveType(id){
	var fd = new FormData();
	fd.append('val',types[id].val);
	fd.append('t',types[id].base);
	if(types[id].unique)
		fd.append('unique',types[id].unique);
	intApi('POST','_d_save/'+id+'?JSON','saveType',fd,id);
}
function makeTable(column,orig){
	for(var i in reqs)
		if(reqs[i].orig===orig&&i!==column)
			return $('#warn').html(t9n('[RU]Эта колонка используется в другой таблице. Создайте новый термин для вашей колонки'
							+'.[EN]This term is used in another table as plain field. Create another term.')).removeClass('hidden');
	location.href='/'+db+'/object/'+orig+'?F_U=1';
}
function checkDelTable(){
	var wait,i,j;
	for(i in types)
		if(types[i].ref===id){
			for(j in reqs)
				if(reqs[j].orig===i)
					return $('#warn').html(t9n('[RU]Эта таблица используется как справочник!'
						+'[EN]This table is a dicitionary for another table!')
						+' <a href="/{_global_.z}/object/'+reqs[j].parent+'">'+types[reqs[j].parent].val+'</a>').removeClass('hidden');
			wait=true,intApi('POST','_d_del/'+i+'?JSON','delRef','',id);
		}
	for(j in reqs)
		if(reqs[j].orig===id)
			return $('#warn').html(t9n('[RU]Эта таблица подчинена другой таблице!'
				+'[EN]This table is a property of another table!')
				+' <a href="/{_global_.z}/object/'+reqs[j].parent+'">'+types[reqs[j].parent].val+'</a>').removeClass('hidden');
	if($('.data-row').length>0)
		return $('#del').click();
	if(!wait)
		intApi('POST','_d_del/'+id+'?JSON','del');
}
function origId(el){
	return reqs[colId(el)].orig;
}
function colId(el){
	return $(el).closest('.edit-сolumn').attr('colid');
}
function tableAction(){
	intApi('POST','_d_del_req/'+index+'?JSON&t='+json.obj,'reload')
}
function addCol(){
	var formData = new FormData();
	formData.append('val',$('#newCol').val());
	formData.append('t',$('#newColBase').val());
	$('#newColBtn').prop('disabled',true);
	if($('#isref').prop('checked'))
		intApi('POST','_d_new?JSON&unique=1','newRef',formData,id);
	else
		intApi('POST','_d_new?JSON','newCol',formData,id);
}
function validateNewType(manual){
							   
	var val=$('#newCol').val().toLowerCase(),base=$('#newColBase').val();
	if(event.keyCode===27)
	    $('#typesBox').hide();
	else if(!manual)
    	drawTypesBox(val);
	if(val.length>0&&base.length>0)
		return $('#newColBtn').prop('disabled',false);
	$('#newColBtn').prop('disabled',true);
}
function chooseType(i){
	$('#typesBox').hide();
	$('#newCol').val(types[i].val);
	$('#newColBtn').prop('disabled',false);
	if(types[i].ref){
		$('#newColBase').val(types[types[i].ref].base);
		$('#isref').prop('checked',true);
		$('#ismulti').show();
	}
	else{
		$('#newColBase').val(types[i].base);
		$('#isref').prop('checked',false);
		$('#ismulti').hide();
	}
}
function drawTypesBox(val){
	var list='',i,j=0,valLayout=autoLayout(val);
	for(i in types)
		if(j<10&&notReq(i)&&((val||'')===''||types[i].val.toLowerCase().indexOf(val)!==-1||types[i].val.toLowerCase().indexOf(valLayout)!==-1)){
			list+='<a class="nodeco" onclick="chooseType('+types[i].id+')"><p class="p-2 mb-0">'
						+(types[i].ref?t9n('[RU]Справочник [EN]Dictionary '):'')+types[i].val
				+'</p></a>';
			j++;
		}
	if(list===''||val==='')
		return $('#typesBox').hide();
	$('#typesBox').html(list).show();
}
function notReq(i){
	if(!types[i].ref)
		for(var j in reqs)
			if(reqs[j].orig===i&&reqs[j].parent===id)
				return false;
	return true;
}
if(search['full']!=undefined){
	$('#full').value=1;
	$('#limit-text,#full-text').toggle();
}
// Put the order mark on the column header
if(search.order_val)$('a[colid='+search.order_val+']').parent().prepend(search.desc?'&#9660; ':'&#9650; ');
if(search['order_val']!=undefined){
	byId('order_val').value=search['order_val'];
	if(search['desc']!=undefined)
		byId('desc').value=0;
}
var filter="{filter}" // Imortant to use "" here
	,ajax='<img style="margin:1px" width="16px" src="/i/ajax.gif">';
function count2del(){
	$('#2delete').html(ajax);
	intApi('GET','object/'+id+'?JSON&_count'+filter,'count2del');
}
var table = document.getElementById("tb");
// Remove empty inputs and input duplicates from cloned freeze-table objects
function sendForm(method){
	var dupes=[];
	$('#form').find('input, textearea, select').each(function(){
		if(this.value==''||(this.name=='_xsrf' && method!='post'))
			$(this).remove();
		if(dupes[this.name]!==undefined)
			$(this).remove();
		else
			dupes[this.name]=1;
	});
	byId('form').onsubmit='';
	byId('form').submit();
}
function addAnArrow () {
	const th = document.getElementsByTagName('thead')[0].children[0].children;
	for (let index = 0; index < th.length; index++)
		$(th[index]).append('<div class="edit-btn">'
				+'<svg class="'+($(th[index]).hasClass('t-table')?'edit-btn-table':'edit-btn-column')+'" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">'
				+'	<path d="M8 8.57145C8.31559 8.57145 8.57143 8.31561 8.57143 8.00002C8.57143 7.68443 8.31559 7.42859 8 7.42859C7.68441 7.42859 7.42857 7.68443 7.42857 8.00002C7.42857 8.31561 7.68441 8.57145 8 8.57145Z" stroke="#777777" stroke-linecap="round" stroke-linejoin="round"/>'
				+'	<path d="M12 8.57145C12.3156 8.57145 12.5714 8.31561 12.5714 8.00002C12.5714 7.68443 12.3156 7.42859 12 7.42859C11.6844 7.42859 11.4286 7.68443 11.4286 8.00002C11.4286 8.31561 11.6844 8.57145 12 8.57145Z" stroke="#777777" stroke-linecap="round" stroke-linejoin="round"/>'
				+'	<path d="M4 8.57145C4.31559 8.57145 4.57143 8.31561 4.57143 8.00002C4.57143 7.68443 4.31559 7.42859 4 7.42859C3.68441 7.42859 3.42857 7.68443 3.42857 8.00002C3.42857 8.31561 3.68441 8.57145 4 8.57145Z" stroke="#777777" stroke-linecap="round" stroke-linejoin="round"/>'
				+'</svg></div>');
}
function addingTD () {
	const trTbody = document.getElementsByTagName('tbody')[2].children;
	for (let index = 0; index < trTbody.length; index++) {
		const element = trTbody[index];
		const td = document.createElement('td');
		td.style.textAlign = 'left'
		element.append(td)
	}
}
function addAColumToCreate () {
	const tr = document.getElementsByTagName('thead')[0].children[0];
	const newTh = document.createElement('th');
	newTh.classList.add('th-plus');
	const span = document.createElement('span');
	span.textContent = '+';
	span.classList.add('th-plus__span')
	newTh.append(span);
	tr.append(newTh);
}
function checkTypes(){
	if(types===undefined)
		newApi('GET','edit_types?JSON','typesCB');
	else
		validateNewType();
}
function hideUnHide(element){
	if(element.classList.contains('hidden'))
		element.classList.remove('hidden')
	else
		element.classList.add('hidden');
}
if('{_global_.role}'==='admin'){
	addAnArrow();
	addAColumToCreate();
	let str='<option value="" class="text-muted">'+t9n('[RU]Выберите тип колонки[EN]Select first column\'s type')+'</option>'
		+'<option value="3" selected>'+t9n('[RU]Короткая строка (до 127 символов)[EN]Short text (up to 127 chars)')+'</option>'
		+'<option value="8">'+t9n('[RU]Строка без ограничения длины[EN]Text of unlimiited length')+'</option>'
		+'<option value="9">'+t9n('[RU]Дата[EN]Date')+'</option>'
		+'<option value="13">'+t9n('[RU]Целое число[EN]Integer')+'</option>'
		+'<option value="14">'+t9n('[RU]Число с десятичной частью[EN]Amount with decimals')+'</option>'
		+'<option value="11">'+t9n('[RU]Логическое значение (Да / Нет)[EN]Boolean: True/False')+'</option>'
		+'<option value="12">'+t9n('[RU]Многострочный текст[EN]Multiline text')+'</option>'
		+'<option value="4">'+t9n('[RU]Дата и время[EN]Date and time')+'</option>'
		+'<option value="10">'+t9n('[RU]Файл[EN]File')+'</option>';
	$('#newColBase,#changeBase').html(str);
 const thPlus = document.querySelector('.th-plus');
   thPlus.addEventListener('click', (e) => {
	checkTypes();
	const inputAdd = thPlus.querySelector('.input-add');
	const span = thPlus.querySelector('.th-plus__span');
		$('.modal-form').addClass('hidden');
		$('.new-col').removeClass('hidden');
		$('#newCol').focus();
		e.stopPropagation();
   })
   const editBtnTable = document.querySelector('.edit-btn-table');
	const editTable = document.querySelector('.edit-table');
	editBtnTable.addEventListener('click', (e) => {
		$('.modal-form').addClass('hidden');
		e.stopPropagation();
		checkTypes();
		hideUnHide(editTable);
		const coord = editBtnTable.getBoundingClientRect();
		const bottom = coord.bottom;
		const left = coord.left;
		$('.unique').prop('checked',$(event.target).closest('th').hasClass('unique'));
		$('.change-base-select,.change-val-input,.change-alias').hide();
		$('.change-base-select select').val($(event.target).closest('th').attr('base'));
		$('.change-val-input input').val($(event.target).closest('th').find('a[colid]').html());
		$('.change-base-btn,.change-val-btn,.change-alias-btn').show();
		editTable.style.top = bottom + 2 + window.scrollY + 'px';
		editTable.style.left = left + window.scrollX - 65 + 'px';
	})
	const editBtncolumn = document.querySelectorAll('.edit-btn-column');
	const editColum = document.querySelector('.edit-сolumn');
	editBtncolumn.forEach((btn,i) => {
		btn.addEventListener('click', (e) => {
			$('.modal-form').addClass('hidden');
			e.stopPropagation();
			checkTypes();
			hideUnHide(editColum);
			const coord = btn.getBoundingClientRect();
			const bottom = coord.bottom;
			const left = coord.left,colId=$(event.target).closest('th').attr('id');
			if(i===0)
				$('.move-left').hide();
			else
				$('.move-left').show();
			$(editColum).attr('colid',colId);
			$('.change-base-select,.change-val-input,.change-alias').hide();
			$('.change-base-select select').val($(event.target).closest('th').attr('base'));
			$('.change-val-input input').val($(event.target).closest('th').find('a[colid]').html());
			$('.change-alias-input input').val($(event.target).closest('th').find('a[colid]').html());
			$('.change-base-btn,.change-val-btn').show();
			$('.mandatory').prop('checked',$(event.target).closest('th').hasClass('mandatory'));
			if(!$(event.target).closest('th').hasClass('t-ref')){
				$('.edit-сolumn .t-ref,.edit-сolumn .t-multi,.edit-сolumn .t-one,.t-req').closest('li').hide();
				$('.t-req').closest('li').show();
				$('.go-table').hide();
				if(types)
					setupTableReq(colId);
				else
					$('.make-table').attr('make-table',colId);
			}
			else{
				if(types)
					$('.go-dict').attr('href','/'+db+'/object/'+types[reqs[colId].orig].ref).attr('target',types[reqs[colId].orig].ref);
				else
					$('.go-dict').attr('go-dict',colId);
				if($(event.target).closest('th').hasClass('t-multi'))
					$('.edit-сolumn .t-multi,.edit-сolumn .t-ref').closest('li').show(),$('.edit-сolumn .t-one,.t-req').closest('li').hide();
				else
					$('.edit-сolumn .t-multi,.t-req').closest('li').hide(),$('.edit-сolumn .t-ref,.edit-сolumn .t-one').closest('li').show();
			}
			editColum.style.top = bottom + 2 + window.scrollY + 'px';
			editColum.style.left = left + window.scrollX - 150 + 'px';
		})
	})
}
function setupTableReq(colId){
	for(var i in reqs)
		if(reqs[i].parent===colId){
			$('.go-table').attr('onclick','location.href="/'+db+'/object/'+colId+'?F_U=1"').show();
			$('.make-table').hide();
			break;
		}
}

const customScrollbarWraps = document.querySelectorAll('.freeze-table');

customScrollbarWraps.forEach((wrap) => {
    const content = wrap.querySelector('#tableContainer');
    if (content) {
        content.classList.add('no-select');
        wrap.insertAdjacentHTML('beforeend', '<div data-scroll><div data-trumb></div></div>');
        const thumb = wrap.querySelector('[data-trumb]');
        const scroll = wrap.querySelector('[data-scroll]');
        
        function updateThumbWidth() {
          const visibleRatio = content.clientWidth / content.scrollWidth;
          const thumbWidth = visibleRatio * wrap.clientWidth;
          thumb.style.width = thumbWidth + 'px';

          if (content.clientWidth === thumbWidth) {
            scroll.style.display = 'none';
          }
        }
        
        updateThumbWidth();
        content.addEventListener('scroll', (e) => {
          e.stopPropagation();
          const scrollPercentage = (content.scrollLeft / (content.scrollWidth - content.clientWidth)) * 100;
          const maxThumbPosition = wrap.clientWidth - thumb.clientWidth;
          const thumbPosition = (scrollPercentage / 100) * maxThumbPosition;
          thumb.style.transform = 'translateX(' + thumbPosition + 'px)';
        });

        let isDragging = false;
        let startX = 0;
        let scrollLeft = 0;
        let thumbPosition = 0;

        thumb.addEventListener('mousedown', (e) => {
          e.stopPropagation();
          isDragging = true;
          startX = e.clientX;
          scrollLeft = thumbPosition;

          document.addEventListener('mousemove', onMouseMove);
          document.addEventListener('mouseup', onMouseUp);
        });

        thumb.addEventListener('touchstart', (e) => {
          e.stopPropagation();
          isDragging = true;
          startX = e.touches[0].clientX;
          scrollLeft = thumbPosition;

          document.addEventListener('touchmove', onTouchMove);
          document.addEventListener('touchend', onTouchEnd);
        });

        scroll.addEventListener('mousedown', (e) => {
          e.stopPropagation();
          const clickX = e.clientX - wrap.getBoundingClientRect().left;
          const maxThumbPosition = wrap.clientWidth - thumb.clientWidth;
          const newThumbPosition = Math.min(maxThumbPosition, Math.max(0, clickX - thumb.clientWidth / 2));
          thumbPosition = newThumbPosition;
          thumb.style.transform = 'translateX(' + thumbPosition + 'px)';
          const scrollPercentage = thumbPosition / maxThumbPosition;
          content.scrollLeft = scrollPercentage * (content.scrollWidth - content.clientWidth);
        });

        function onMouseMove(e) {
          e.stopPropagation();
          if (!isDragging) return;

          const deltaX = e.clientX - startX;
          const maxThumbPosition = wrap.clientWidth - thumb.clientWidth;
          thumbPosition = Math.min(maxThumbPosition, Math.max(0, scrollLeft + deltaX));
          thumb.style.transform = 'translateX(' + thumbPosition + 'px)';
          const scrollPercentage = thumbPosition / maxThumbPosition;
          content.scrollLeft = scrollPercentage * (content.scrollWidth - content.clientWidth);
        }

        function onTouchMove(e) {
          e.stopPropagation();
          if (!isDragging) return;

          const deltaX = e.touches[0].clientX - startX;
          const maxThumbPosition = wrap.clientWidth - thumb.clientWidth;
          thumbPosition = Math.min(maxThumbPosition, Math.max(0, scrollLeft + deltaX));
          thumb.style.transform = 'translateX(' +  thumbPosition + 'px)';
          const scrollPercentage = thumbPosition / maxThumbPosition;
          content.scrollLeft = scrollPercentage * (content.scrollWidth - content.clientWidth);
        }

        function onMouseUp() {
          isDragging = false;
          document.removeEventListener('mousemove', onMouseMove);
          document.removeEventListener('mouseup', onMouseUp);
        }

        function onTouchEnd() {
          isDragging = false;
          document.removeEventListener('touchmove', onTouchMove);
          document.removeEventListener('touchend', onTouchEnd);
        }


        let isDraggingTwo = false;
        let startXTwo;

        content.addEventListener('mousedown', (e) => {
          e.stopPropagation();
          isDraggingTwo = true;
          startXTwo = e.clientX;
          scrollLeft = content.scrollLeft;
          // content.style.cursor = 'grabbing';

          document.addEventListener('mousemove', onMouseMoveOnContent);
          document.addEventListener('mouseup', onMouseUpOnContect);
        });

        function onMouseMoveOnContent(e) {
          e.stopPropagation();
          if (!isDraggingTwo) return;

          const deltaX = e.clientX - startXTwo;
          content.scrollLeft = scrollLeft - deltaX;
        }

        function onMouseUpOnContect() {
          isDraggingTwo = false;
          // content.style.cursor = 'grab';
          document.removeEventListener('mousemove', onMouseMoveOnContent);
          document.removeEventListener('mouseup', onMouseUpOnContect);
        };

        content.addEventListener('mouseleave', (e) => {
          e.stopPropagation();
          if (isDraggingTwo) {
            isDraggingTwo = false;
            // content.style.cursor = 'grab';
            document.removeEventListener('mousemove', onMouseMoveOnContent);
            document.removeEventListener('mouseup', onMouseUpOnContect);
          }
        });
    }
});

</script>
<!-- End:&Uni_obj -->

<script>
$('.data-row').find('td').each(function(){ // restore the line breaks
	$(this).html($(this).html().replace(/[\t\ n]+$/gm,'').replace(/\n/gm,'<br />'));
});
let typeOption='<option value=":id:" id=":id:">:name:</option>';
// Функция для отправки асинхронного запроса по https api с обработкой его результата
function intApi(m,u,b,vars,index){ // Параметры: метод, адрес, действие - ветка switch, параметры, ID целевого элемента
	vars=vars||''; // По умолчанию список параметров пуст
	var h='',i,j,json,obj=new XMLHttpRequest(); // Объявляем переменную под JSON и API по HTTPS
	obj.open(m,'/'+db+'/'+u,true); // Открываем асинхронное соединение заданным методом по нужному адресу
	if(m=='POST'){ // Если это POST запрос, то передаем заданные параметры
		if(typeof vars=='object')
			vars.append('_xsrf',xsrf);
		else{
			obj.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
			vars='_xsrf='+xsrf+'&'+vars; // добавляем токен xsrf, необходимый для POST-запроса
		}
	}
	$('#warn').html('').addClass('hidden');
	obj.onload=function(e){ // Когда запрос вернет результат - сработает эта функция
		try{ // в this.responseText лежит ответ от сервера
			json=JSON.parse(this.responseText); // Пытаемся разобрать ответ как JSON
		}
		catch(e){ // Если произошла ошибка при разборе JSON
			h=this.responseText;
			$('#warn').html(h).removeClass('hidden');
		}
		obj.abort(); // Закрываем соединение
		switch(b){ // Отрабатываем заданную команду - переходим в соответствующую ветку case
			case 'count2del':
				$('#2delete').html(json.count||'<a onclick="count2del()" title="'+t9n('[RU]Не удалось подсчитать количество записей. Кликните, чтобы попытаться снова.[EN]Failed to count the objects number, click here to try again')+'">*</a>');
				break;
			case 'newRef':
				if(json.obj)
					intApi('POST','_d_ref/'+json.obj+'?JSON','newCol','',index);
				break;
			case 'new-multi':
				if(json.obj)
					intApi('POST','_d_multi/'+json.id+'?JSON','reload');
				break;
			case 'newCol':
				if(json.obj)
					if($('#ismulti input').prop('checked'))
						intApi('POST','_d_req/'+index+'?JSON&t='+json.obj,'new-multi','',index);
					else
						intApi('POST','_d_req/'+index+'?JSON&t='+json.obj,'reload');
				break;
			case 'delRef':
				if(json.id)
					intApi('POST','_d_del/'+index+'?JSON','del');
				else
					$('#warn').html(h+JSON.stringify(json)).removeClass('hidden');
				break;
			case 'del':
				if(json.id)
					location.href='/'+db+'/dict';
				else
					$('#warn').html(h+JSON.stringify(json)).removeClass('hidden');
				break;
			case 'reload':
				if(json.id)
					location.reload();
				else
					$('#warn').html(h+JSON.stringify(json)).removeClass('hidden');
				break;
			case 'multi':
				if(json.id){
					if($('#'+json.id).hasClass('t-multi'))
						$('#'+json.id).removeClass('t-multi');
					else
						$('#'+json.id).addClass('t-multi');
					$('.edit-сolumn .t-multi,.edit-сolumn .t-one').closest('li').toggle();
				}
				break;
			case 'def_ref_dd':
				if(json.object!==undefined){
					for(i in json.object)
						h+='<li class="p-2"><a onclick="byId('+json.type.id+').value=this.innerHTML;sendForm()">'+json.object[i].val+'</a></li>';
					$('#dd'+json.type.id).html(h);
					if($('#dd'+json.type.id).is(":hidden"))
						$('#dd'+json.type.id).dropdown('toggle');
				}
				break;
		}
	}
	obj.send(vars); // отправили запрос и теперь будем ждать ответ, а пока - выходим
}
var types,reqs=[];
$('.t-column').each(function(){reqs.push(this.id)});
function refreshDD(id){
	intApi('GET','object/'+id+'?JSON&F_'+id+'=%25'+byId(id).value+'%25','def_ref_dd');
}
$(document).ready(function(){
	if($('#del').length===0)
		$('#delTable').remove();
	if($('.parent-info').length===0)
    	$('.data-row td').click(inlineEdit);
    else
    	$('.data-row td:not(:last-child)').click(inlineEdit);
    if(getCookie('edit-inline'))
        $('#allowInline').toggleClass('button-on');
    if(getCookie('edit-inline-all')){
        $('#allowInline').addClass('button-on');
        $('#editInlineAll').val('1');
    }
});
function getReqs(json,el){
    var i=0,j=0,obj=$(el).closest('.data-row').attr('id')
        ,fd=new FormData();
    $('#'+obj).find('td').each(function(){
        if(reqs[i]&&($('#'+reqs[i]).attr('granted')==='WRITE'||$('.create-btn.display-block').length>0)){
            $(this).attr('t',reqs[i]);
            $(this).attr('b',json.reqs[reqs[i]].base);
            if($('#'+reqs[i]).hasClass('arr'))
                $(this).attr('arr-type',$('#'+reqs[i]).attr('arr-type'));
            if($('#'+reqs[i]).hasClass('t-ref'))
                $(this).attr('ref-orig',$('#'+reqs[i]).attr('ref-type'));
            if($('#'+reqs[i]).hasClass('t-multi')){
                $(this).attr('multi',1);
                $(this).attr('v','');
            }
            else
                $(this).attr('v',json.reqs[reqs[i]].value);
            if(json.reqs[reqs[i]].value!=='')
                if($(el).closest('.data-row-new').length>0){
                	fd.append('t'+reqs[i],json.reqs[reqs[i]].value);
                	if(!$('#'+reqs[i]).hasClass('t-ref'))
                	    $(this).find('div').html(escapeHtmls(json.reqs[reqs[i]].value));
                	$(this).addClass('saving');
                	j++;
                }
        }
        i++;
    });
    if(j>0)
        newApi('POST','_m_set/'+obj+'?JSON','saveDefaultsDone',fd);
    if($(el).attr('b'))
        doInlineEdit(el);
}
function saveDefaultsDone(json){
    var val;
    $('.saving').each(function(){
        if($(this).attr('ref-orig')){
            val=$(this).attr('v');
            val=val?'<a href="/'+db+'/object/'+$(this).attr('ref-orig')+'/?F_I='+val+'"'
                        +($('#'+$(this).attr('t')).hasClass('t-multi')?' class="ms-link"':'')
                        +'>'+escapeHtmls(getSelOpt(val))+'</a>'
                    :'';
            $(this).find('div').html(val);
        }
    });
    $('.saving').removeClass('saving');
}
function getSelOpt(val){
    var i,j;
    for(i in selOpts)
        for(j in selOpts[i])
            if(selOpts[i][j].id===val)
                return selOpts[i][j].val;
}
function inlineEdit(){
    if((!getCookie('edit-inline')&&!getCookie('edit-inline-all'))
                ||(($('th[granted=WRITE]').length===0&&$('.create-btn.display-block').length===0))
                ||(event&&event.target&&event.target.tagName.toLowerCase()==='a'))
        return;
    if($(this).hasClass('editing')||$(this).hasClass('last-edited'))
        return;
    $('.last-edited').removeClass('last-edited');
    $('.select2').each(function(){saveInline(this)});
    $('input[type=file]').each(function(){leaveFile(this)});
    if($(this).attr('b')===undefined)
        newApi('GET','edit_obj/'+$(this).closest('.data-row').attr('id')+'?JSON','getReqs','',this);
    else
        doInlineEdit(this);
}
var selOpts={},limit=50;
function doInlineEdit(el){
    var i,b=$(el).attr('b')
        ,refOrigType=$(el).attr('t')
        ,refOrig=$(el).attr('ref-orig')
        ,v=$(el).attr('v');
    if($(el).attr('arr-type')){
        $(el).addClass('editing-modal');
        editArr($(el).attr('arr-type'),$(el).closest('tr').attr('id'));
        return;
    }
    $(el).addClass('editing last-edited');
    // We've got a default value, while the value is not set
    if(v!==''&&$(el).find('div').html()===''&&!$(el).attr('multi'))
        $(el).attr('changed','1'); // Reset the value to save the default one upon edit
    if(refOrig){
        if($(el).attr('multi')){
            $(el).find('div').html(sel2.replace(':ref-typ:',refOrig)
                                    .replace(':multi:',1));
            $(el).find('.badge-pill').each(function(){
                $(this).append(dropMS.replace(/:id:/gm,this.id));
            });
        }
        else{
            $(el).attr('val',$(el).find('a').html()||$(el).find('div').html());
            $(el).find('div').html(sel2.replace(':ref-typ:',refOrig)
                                    .replace(':multi:',0));
        }
        $(el).find('select').focus();
        if(selOpts[refOrig])
            fillInDDL(el,refOrig);
        else
            newApi('GET','_ref_reqs/'+refOrigType+'?JSON&LIMIT='+limit,'getRefs','',el);
    }
    else if(b==='DATE')
        $(el).find('div').html('<input type="date" class="inline-edit" />');
    else if(b==='DATETIME')
        $(el).find('div').html('<input type="datetime-local" class="inline-edit" />');
    else if(b==='BOOLEAN')
        $(el).find('div').html('<input type="checkbox" class="form-control inline-edit" />');
    else if(b==='MEMO')
        $(el).find('div').html('<textarea class="inline-edit"></textarea>');
    else if(b==='FILE')
        $(el).find('div').html((v.length>0?delFile:'')+'<input type="file" class="inline-edit" />');
    else
        $(el).find('div').html('<input type="text" class="inline-edit" />');
    $(el).find('textarea').val(v).css('height',$(el).css('height')).focus();
    $(el).find('input[type=text]').val(v).focus();
    $(el).find('input[type=checkbox]').prop('checked',v.length>0).focus();
    $(el).find('input[type=date]').val(moment.utc(v, 'DD.MM.YYYY').format("YYYY-MM-DD")).select().focus();
    $(el).find('input[type=datetime-local]').val(moment.utc(v, 'DD.MM.YYYY HH:mm:ss').format("YYYY-MM-DD HH:mm:ss")).select().focus();
    $(el).find('textarea,input,select,.select2').on('keydown',function(){checkTab(this)});
    $(el).find('select,.select2').on('keydown',function(){if(event.keyCode===37||event.keyCode===39)event.preventDefault()});
    $(el).find('textarea,input[type!=file],select').on('change',function(){saveInline(this)});
    $(el).find('textarea,input[type!=file]').on('blur',function(){saveInline(this)});
    $(el).find('input[type=file]').on('change',function(){saveInlineFile(this)});
}
function fillInDDL(el,refOrig){
    const val=$(el).closest('td').attr('v');
    var count=0;
    for(i in selOpts[refOrig]){
        if($(el).closest('td').find('span[ref='+selOpts[refOrig][i].id+']').length===0)
            $(el).find('select').append($(sel2Opt.replace(':id:',selOpts[refOrig][i].id)
                                                .replace(':r:',refOrig)
                                                .replace(':selected:',val===selOpts[refOrig][i].id?'selected':'')
                                                .replace(':val:',selOpts[refOrig][i].val)));
        count++;
    }
    if(!$(el).attr('multi')&&$(el).find('select').val()!==val)
        $(el).find('select').prepend(sel2Opt.replace(':id:',val)
                                        .replace(':val:',escapeHtmls($(el).closest('td').attr('val')))
                                        .replace(':r:',refOrig)
                                        .replace(':selected:','selected'));
    if(count>=limit-1)
        $(el).find('select').attr('i-more',1);
    initSel2($(el).find('select'));
																																																							 
}
function getRefs(json,el){
    const orig=$(el).attr('ref-orig');
    selOpts[orig]=[];
    if(json)
        for(var i in json)
            selOpts[orig][i]={id:i,val:json[i],type:'3'};
    if(el)
        fillInDDL(el,orig);
}
function checkTab(el){
    var neigh;
    if(event.keyCode===13){
        event.preventDefault();
        saveInline(el);
    }
    else if(event.keyCode===38){ // Up arrow
        if(neigh=$(el).closest('tr').prev().find('td')[$(el).closest('td').prevAll('td').length])
            neigh.click();
    }
    else if(event.keyCode===40){ // Down arrow
        if(neigh=$(el).closest('tr').next().find('td')[$(el).closest('td').prevAll('td').length])
            neigh.click();
    }
    else if(event.keyCode===9){
        if(event.shiftKey){
            if($(el).closest('td').prev('[b!="FILE"]').attr('t'))
                $(el).closest('td[b!="FILE"]').prev().click();
            else if($(el).closest('td').prev().prev('[b!="FILE"]').attr('t'))
                $(el).closest('td[b!="FILE"]').prev().prev().click();
            else
                $(el).closest('tr').prev().find('td[b!="FILE"]').first().click();
        }
        else{
            if($(el).closest('td').next('[b!="FILE"]').attr('t'))
                $(el).closest('td[b!="FILE"]').next().click();
            else if($(el).closest('td').next().next('[b!="FILE"]').attr('t'))
                $(el).closest('td[b!="FILE"]').next().next().click();
            else
                $(el).closest('tr').next().find('td[b!="FILE"]').first().click();
        }
        event.preventDefault();
    }
}
function dropMsDone(json,i){
    $('#'+i).remove();
}
function addMsDone(json,vars){
    const badge=msLink.replace(':id:',json.id)
                    .replace(':val:',vars.val)
                    .replace(':orig:',vars.ref)
                    .replace(/:ref:/gm,vars.id);
    if($(vars.el).find('.badge-pill').length>0)
        $(vars.el).find('.badge-pill').last().after(badge);
    else
        $(vars.el).prepend(badge);
    $('#'+json.id).css('background-color','#'+msColors[vars.id%24]);
    $(vars.el).removeClass('saving');
    $(vars.el).attr('changed','');
}
function saveInlineDone(json,el){
    $(el).removeClass('saving');
}
function deleteFile(el){
    newApi('POST','_m_set/'+$(el).closest('tr').attr('id')+'?JSON','deleteFileDone','t'+$(el).closest('td').attr('t'),el);
}
function deleteFileDone(json,el){
    $(el).closest('div').html('');
}
function saveInlineFileDone(json,el){
    const v='<a target="_blank" href="/'+json.args+'">'+$(el).find('div').html()+'</a>';
    $(el).find('div').html(v);
    $(el).removeClass('editing');
    $(el).attr('v',v);
}
function saveInlineFile(el){
    var fd=new FormData(),td=$(el).closest('td');
    if(el.files[0].name){
    	fd.append('t'+td.attr('t'),el.files[0],el.files[0].name);
        newApi('POST','_m_set/'+$(el).closest('tr').attr('id')+'?JSON','saveInlineFileDone',fd,td);
        $(el).removeClass('last-edited');
        $(el).closest('div').html(el.files[0].name);
    }
    else
        $(el).closest('div').html($(el).closest('td').attr('v'));
}
function leaveFile(el){
    $(el).closest('td').removeClass('editing');
    $(el).closest('div').html($(el).closest('td').attr('v'));
}
function saveInline(el){
    var href,val=el.value
        ,td=$(el).closest('td')
        ,fd=new FormData();
    var i=$(el).closest('tr').attr('id')
        ,base=td.attr('b')
        ,ref=td.attr('ref-orig')
        ,multi=td.attr('multi')
        ,type=td.attr('t');
    if(base==='DATE'){
        val=moment.utc(val).format("DD.MM.YYYY");
        if(!val.match(/^(\d\d\.\d\d\.\d\d\d\d)$/))
            val='';
    }
    else if(base==='DATETIME'){
        val=moment.utc(val).format("DD.MM.YYYY HH:mm:ss");
        if(!val.match(/^(\d\d\.\d\d\.\d\d\d\d \d\d:\d\d:\d\d)$/))
            val='';
    }
    else if(base==='BOOLEAN')
        val=$(el).prop('checked')?'X':'';
    td.removeClass('editing');
    if((val!==td.attr('v')||td.attr('changed')==='1')&&(!multi||val!=='')){
       	fd.append('t'+type,val);
        if(multi)
            newApi('POST','_m_set/'+i+'?JSON','addMsDone',fd,{el:td,id:val,ref:ref,val:$(td).find('option[value="'+val+'"]').html()});
        else
            newApi('POST','_m_set/'+i+'?JSON','saveInlineDone',fd,td);
        td.attr('changed','');
        td.addClass('saving');
        td.removeClass('last-edited');
    }
    if(base==='PWD'&&val!=='')
        val='******';
    if(ref){
        if(multi){
            $(el).closest('div').html('');
            $('.drop-ms').remove();
        }
        else{
            $(el).closest('td').find('div').html(val?'<a href="/'+db+'/object/'+ref+'/?F_I='+val+'">'+escapeHtmls($(td).find('option[value="'+val+'"]').html())+'</a>':'');
            $(td).attr('v',val);
        }
        try{
            $(el).select2('destroy');
        }
        catch {};
        return;
    }
    else{
        $(el).closest('div').html(escapeHtmls(val));
        markDown($(td).find('div')[0]);
    }
    $(td).attr('v',val);
}
function escapeHtmls(t){
    t=t||'';
    if(!search.full&&t.length>127)
        t=t.substr(0,127)+'...';
    return t.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}
function initSel2(el){
    var curEl=el;
    $(el).select2({
        tags: $(this).attr('granted')!==undefined,
        createTag: function (params) {
            let term = $.trim(params.term);
            if (term === '') return null;
            return {
              id: '-1',
              text: term,
              newTag: true
            }
        },
        placeholder: t9n('[RU]Выберите[EN]Select'),
        allowClear: true,
        ajax: $(curEl).attr('i-more') ? {
            url: function(params){
                return requestURL='/'+db+'/_ref_reqs/'+$(this).closest('td').attr('t')+'?JSON';
            },
            processResults: function(data){
                let formattedData=[];
                if(data)
                    for(var i in data)
                        if($(curEl).closest('td').find('span[ref='+i+']').length===0)
                            formattedData.push({"id":i, "text":data[i]})
                return {results:formattedData};
            },
            dataType: 'json',
            cache: true,
            delay: 330
        } : undefined
    });
}
// Callback newApi functions are named with the CB suffix
function typesCB(json,index){
	types={};
	dataItems=json.edit_types;
	dataTypes=json.types;
	for(var i in dataItems.id){
		types[dataItems.id[i]]={ref:(dataItems.ref_val===''?'':dataItems.ref_val[i])
								,val:dataItems.val[i]
								,base:dataItems.t[i]
								,id:dataItems.id[i]
								,unique:(dataItems.uniq[i]==='1')};
		if(dataItems.req_id[i]!=='')
			reqs[dataItems.req_id[i]]={attrs:dataItems.attrs[i]
									,orig:dataItems.req_t[i]
									,parent:dataItems.id[i]};
	}
	$('.go-dict[go-dict]').each(function(){
		var i=types[reqs[$(this).attr('go-dict')].orig].ref;
		this.href='/'+db+'/object/'+i;
		$(this).attr('target',i);
	});
	$('.make-table').each(function(){
		setupTableReq($(this).attr('make-table'));
	});
	if($('#newCol').is(':visible'))
		validateNewType();
}
function setContains(n,pre,post){
	$('.filter-row').find('input[name="'+n+'"]').each(function(){
		this.value=pre+this.value.replace(/%/g,'')+post
	});
	$('#form').submit();
}
if($('#tb tbody tr').length===1){
	var html='',colid;
	$('.filter-row').find('input[value!=""][name^="F_"]').each(function(){
		if((this.value.substr(0,1)!=='%')||(this.value.substr(-1)!=='%'))
			html+=$('#searchlink').html().replace(':column:',$('a[colid='+$(this).attr('name').substr(2)+']').html())
								.replace(/:filter:/g,this.value.replace(/%/g,''))
								.replace(/:name:/g,$(this).attr('name'));
	});
	if(html!==''){
		$('#searchlink').html(html);
		$('.searchlink').show();
	}
	else if(search.pg&&search.pg!=='1')
		$('#notfound').html(t9n('[RU]На этой странице нет записей. Можно вернуться на предыдущую.[EN]This page is empty. You may visit the previous page.'));
	else if($('.filter-row').find('input[value!=""]').length===0)
		$('#notfound').html(t9n('[RU]Таблица пуста. Нажмите + слева вверху, чтобы добавить записи.[EN]The table is empty. Press + in the upper left to add a record.'));
	$('#notfound').show();
}
var compactTogglerStyle =  `
@media screen and (max-width:800px){
	td, th {
		display: block;
		float: left;
		border: 1px solid #c8c8c8;
	}
	tr {
		border: 1px solid #c8c8c8;
	}
	thead {
		display: block;
		background-color: #fff;
		position: sticky;
		top: 0;
	}
	td div {
		min-height: 1.6rem;
		line-height: 1.6rem;
		white-space: normal;
		overflow: hidden;
		text-overflow: ellipsis;
		display: -webkit-box;
		-webkit-line-clamp: 4; /* number of lines to show */
		-webkit-box-orient: vertical;
	}
	.clone-scroll-bar-wrap {
		pointer-events: none;
	}
`
window.addEventListener('load',function(){
	Object.defineProperty(Array.prototype, 'chunk_inefficient', {
		value: function(chunkSize) {
		  var array = this;
		  return [].concat.apply([],
			array.map(function(elem, i) {
			  return i % chunkSize ? [] : [array.slice(i, i + chunkSize)];
			})
		  );
		}
	  });
	  recalculateTable();
	$(window).scroll(function(){$(window).resize();});
	$(window).resize();
	$(window).click(function(){
		if($(event.target).closest('.modal-form').length===0)
			$('.modal-form').addClass('hidden');
	});
	$('#tbSize').val(getCookie('tb_size')||'16');
	if(search.saved1||search.new1||search.copied1||search.canc1||search.F_I){
		$('.ending').append(' <a onclick="location.href=$(\'#clearSearch\').attr(\'href\')" href="#">Показать остальные записи</a>');
		$('#clearSearch').removeClass('hidden');
	}
});
var i,filters;
if(byId("filter_row")){
	filters=byId("filter_row").getElementsByTagName("input");
	for(i=0;i<filters.length;i++)
		if(filters[i].value!="") {
			filters[i].size=filters[i].value.length + 1;
			$('.filter-row,#clearSearch').removeClass('hidden');
		}
}
<!-- Begin:_NoObj -->
else{
	byId('warn').innerHTML=t9n('[RU]Объект {_request_.f_u} не найден, вероятно, он был удален[EN]Object $id not found (it might be deleted)');
	byId('warn').classList.remove('hidden');
}
<!-- End:_NoObj -->
if(search.exists1){
	byId('warn').innerHTML=t9n('[RU]Запись уже существует[EN]The record already exists');
	byId('warn').classList.remove('hidden');
	setTimeout(function(){byId('warn').classList.add('hidden')},7000);
}
function markDown(el){
	if(el&&el.innerHTML.indexOf('***')===-1&&el.innerHTML.indexOf('~~~')===-1&&el.innerHTML.indexOf('___')===-1)
		el.innerHTML=el.innerHTML.replace(/\*\*(.+?)\*\*(?!\*)/g,'<b>$1</b>')
		                        .replace(/__(.+?)__(?!\_)/g,'<i>$1</i>')
		                        .replace(/~~(.+?)~~(?!\~)/g,'<s>$1</s>');
}
$('.data-row').find('div').each(function(){markDown(this)});
</script>
<style>
.mat-outer{
    position: absolute;
    background-color: #6c757d;
    margin-top:50px;
    height: 100%;
    width: 100%;
    opacity: 25%;
}
.mat-middle{
    margin-top:51px;
    width: 100vw;
    position: fixed;
    height: calc(100vh - 50px);
    display: flex;
    justify-content: center;
    align-items: center;
    top: 50;
    left: 0;
}
.mat-inner{
    background-color: #fff;
}
</style>
<script>
var zIndex=10000
    ,modalArrTemplate='<div id="mo:zindex:" class="mat-outer" style="z-index: :zindex:"></div>'
        +'<div id="mi:zindex:" class="mat-middle" style="z-index: :zindex-plus:" onclick="removeModal(:zindex:,:obj:)">'
        +'<div class="mat-inner p-3" onclick="event.stopPropagation()">'
        +' <table class="table table-bordered table-sm"><thead><tr><th><tbody>'
        +'</div></div>';
function removeModal(i,obj){
    $('#mo'+i+',#mi'+i).remove();
    $('#'+obj+' .editing-modal').removeClass('editing-modal');
}
function doEditArr(json){
    var i,j,t,rid,val,attrs,index=zIndex;
    $('body').prepend(modalArrTemplate.replace(/:zindex:/g,zIndex++)
                                    .replace(/:zindex-plus:/g,zIndex++)
                                    .replace(/:obj:/g,json.type.up));
    $('#mi'+index+' th').html(json.type.val);
    for(i in json.req_order)
        $('#mi'+index+' tr').append('<th>'+json.req_type[json.req_order[i]]);
    for(i in json.object){
        rid=json.object[i].id;
        $('#mi'+index+' tbody').append('<tr id="'+rid+'"><th><a href="/'+db+'/edit_obj/'+rid+'" title="'+t9n('[RU]Редактировать[EN]Edit')+'">'+json.object[i].val)+'</a>';
        for(j in json.req_order){
            t=json.req_order[j];
            attrs='';
            if(json.reqs&&json.reqs[rid][t])
                val=json.reqs[rid][t];
            else
                val='';
            if(json.arr_type[t]){
                val='<a href="/'+db+'/object/'+t+'?F_U='+rid+'">('+(val===''?0:val)+')</a>';
                attrs+=' arr-type="'+t+'"';
            }
            $('#'+rid).append('<td '+attrs+' onclick="inlineArrEdit(this)">'+val);
        }
    }
}
function inlineArrEdit(el){
    if($(el).attr('arr-type'))
        editArr($(el).attr('arr-type'),$(el).closest('tr').attr('id'));
}
function editArr(t,i){
    newApi('GET','object/'+t+'/?JSON&F_U='+i,'doEditArr');
}
</script>